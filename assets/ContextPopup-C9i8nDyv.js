import{r as n,j as t,B as b,G as L,d as x,c as O,I as N,M as R,b as ee}from"./index-C9bWR1SX.js";import{r as re,c as X,b as H,H as K,P,u as se,m as ce}from"./Switch-FuFYDnQc.js";const oe=e=>n.createElement("svg",{id:"\\u0421\\u043B\\u043E\\u0439_1",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",x:"0px",y:"0px",viewBox:"0 0 24 24",style:{enableBackground:"new 0 0 24 24"},xmlSpace:"preserve",fill:"currentColor",stroke:"transparent",...e},n.createElement("path",{d:"M12,24L12,24c-1.1,0-2-0.9-2-2V2c0-1.1,0.9-2,2-2h0c1.1,0,2,0.9,2,2v20C14,23.1,13.1,24,12,24z"}),n.createElement("path",{d:"M0,12L0,12c0-1.1,0.9-2,2-2h20c1.1,0,2,0.9,2,2v0c0,1.1-0.9,2-2,2H2C0.9,14,0,13.1,0,12z"})),tt=n.memo(oe),ae=e=>n.createElement("svg",{id:"\\u0421\\u043B\\u043E\\u0439_1",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",x:"0px",y:"0px",viewBox:"0 0 24 24",style:{enableBackground:"new 0 0 24 24"},xmlSpace:"preserve",fill:"currentColor",stroke:"transparent",...e},n.createElement("path",{d:"M1.5,10.5L1.5,10.5c0.8,0.8,2.1,0.8,2.9,0L7,8v14c0,1.1,0.9,2,2,2h0c1.1,0,2-0.9,2-2V0.9c0-0.7-0.9-1.1-1.4-0.6l-8,7.3 C0.7,8.3,0.7,9.7,1.5,10.5z"}),n.createElement("path",{d:"M22.5,13.5L22.5,13.5c-0.8-0.8-2.1-0.8-2.9,0L17,16.1v-14c0-1.1-0.9-2-2-2h0c-1.1,0-2,0.9-2,2v21.1c0,0.7,0.9,1.1,1.4,0.6 l8-7.3C23.3,15.7,23.3,14.4,22.5,13.5z"})),nt=n.memo(ae),le=({children:e})=>{const s=document.getElementById("fixed-ui");return re.createPortal(e,s)},ue="_PageTools_zrcxb_1",ie={PageTools:ue},rt=({children:e})=>t.jsx(le,{children:t.jsx("div",{className:ie.PageTools,children:e})}),me=e=>n.createElement("svg",{id:"\\u0421\\u043B\\u043E\\u0439_1",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",x:"0px",y:"0px",viewBox:"0 0 24 24",style:{enableBackground:"new 0 0 24 24"},xmlSpace:"preserve",fill:"currentColor",stroke:"transparent",...e},n.createElement("path",{d:"M3.7,8.1c-0.8,0.8-0.8,2,0,2.8l6.7,6.7c1,1,2.5,1,3.4,0l6.5-6.5c0.8-0.8,0.8-2,0-2.8l0,0c-0.8-0.8-2-0.8-2.8,0l-5.5,5.5 L6.5,8.1C5.7,7.4,4.4,7.4,3.7,8.1L3.7,8.1z"})),de=n.memo(me),he="_button_qsre9_1",xe="_inner_qsre9_5",pe="_chevron_qsre9_10",q={button:he,inner:xe,chevron:pe},Z=n.memo(({label:e,name:s,rules:a,options:r=[],control:m})=>{var y;const{field:{onChange:d,value:g},fieldState:{error:w}}=X({name:s,rules:a,control:m}),l=n.useRef(r);n.useEffect(()=>{var u;d((u=(r==null?void 0:r.find(p=>p.value===g))??(r==null?void 0:r.find(p=>p.default))??(r==null?void 0:r[0]))==null?void 0:u.value)},[]),n.useEffect(()=>{var u;JSON.stringify(l.current)!==JSON.stringify(r)&&(l.current=r,d((u=(r==null?void 0:r.find(p=>p.default))??(r==null?void 0:r[0]))==null?void 0:u.value))},[d,r,g]);const Y=H();return t.jsxs("label",{children:[t.jsx(K,{label:e,error:w}),t.jsxs(b,{className:q.button,cs:{inner:q.inner},onClick:Y.open,children:[t.jsx("span",{children:(y=r==null?void 0:r.find(u=>u.value===g))==null?void 0:y.label}),t.jsx(de,{className:q.chevron})]}),t.jsx(P,{controls:Y,children:t.jsx(L,{column:!0,children:r&&r.map(u=>t.jsx(b,{onClick:()=>{d(u.value),Y.close()},children:u.label},u.value))})})]})});x.extend(O);const st=n.memo(({setSort:e,controls:s,fields:a,orders:r})=>{const{control:m,watch:d,handleSubmit:g}=se({mode:"onChange"}),w=l=>{s.close(),e(l)};return t.jsx(P,{controls:s,minWidth:250,children:t.jsx(L,{column:!0,children:t.jsxs("form",{onSubmit:g(w),children:[t.jsx(P.Scroller,{children:t.jsxs(L,{column:!0,children:[t.jsx(Z,{label:"Сортировка",name:"field",options:a,control:m,autoFocus:!0}),t.jsx(Z,{label:"Порядок",name:"order",options:r[d("field")],control:m})]})}),t.jsx(b,{type:"submit",children:"Применить"})]})})})}),fe=e=>n.createElement("svg",{id:"\\u0421\\u043B\\u043E\\u0439_1",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",x:"0px",y:"0px",viewBox:"0 0 24 24",style:{enableBackground:"new 0 0 24 24"},xmlSpace:"preserve",fill:"currentColor",stroke:"transparent",...e},n.createElement("path",{d:"M13,2.1C8.4,1.6,3.9,4.5,2.5,9c-1,3-0.4,6,1.1,8.4l2.5-1.6c-1.2-1.9-1.5-4.3-0.5-6.6C6.7,6.6,9.3,4.9,12.1,5 c4.6,0.1,7.7,4.3,6.7,8.5c-0.3,1.5-1.1,2.7-2.1,3.7c-0.5,0.5-0.6,1.3-0.2,1.9l0,0c0.5,0.8,1.6,0.9,2.3,0.3c1.4-1.3,2.5-3.1,3-5.2 C23,8.4,19.1,2.7,13,2.1z"}),n.createElement("path",{d:"M1.5,17.2L7,13.8c0.6-0.4,1.4,0.1,1.4,0.8l-0.1,6c0,0.7-0.7,1.1-1.3,0.8l-5.4-2.6C0.9,18.4,0.9,17.6,1.5,17.2z"})),we=n.memo(fe),_e="_controls_1dmxs_1",ge="_monthWrapper_1dmxs_7",ve="_monthButtonInner_1dmxs_12",Ce="_nextMonthIcon_1dmxs_16",ye="_month_1dmxs_7",Me="_yearWrapper_1dmxs_25",Be="_yearButton_1dmxs_31",Ye="_yearButtonInner_1dmxs_31",je="_prevYearIcon_1dmxs_44",Se="_nextYearIcon_1dmxs_48",Ee="_year_1dmxs_25",Ie="_days_1dmxs_57",ke="_weekday_1dmxs_63",be="_monthDayInner_1dmxs_67",De="_selected_1dmxs_71",Ne="_resetButtonWrapper_1dmxs_75",$e="_resetButtonInner_1dmxs_81",h={controls:_e,monthWrapper:ge,monthButtonInner:ve,nextMonthIcon:Ce,month:ye,yearWrapper:Me,yearButton:Be,yearButtonInner:Ye,prevYearIcon:je,nextYearIcon:Se,year:Ee,days:Ie,weekday:ke,monthDayInner:be,selected:De,resetButtonWrapper:Ne,resetButtonInner:$e};x.extend(O);const Le=({setDate:e,day:s,month:a,year:r,controls:m})=>{const[d,g]=n.useState(Number(a!==""?a:x().format("M")-1)),[w,l]=n.useState(Number(r!==""?r:x().format("YYYY"))),Y=n.useMemo(()=>{const c=x(`1.${d+1}.${w}`,"D.M.Y").day();return c===0?6:c-1},[d,w]),y=n.useMemo(()=>x(`1.${d+1}.${w}`,"D.M.Y").daysInMonth(),[d,w]),u=()=>{g(c=>{let f=c-1;return f<0&&(f=11,E()),f})},p=()=>{g(c=>{let f=c+1;return f>11&&(f=0,j()),f})},E=()=>{l(c=>c-1)},j=()=>{l(c=>c+1)},$=["Январь","Февраль","Март","Апрель","Май","Июнь","Июль","Август","Сентябрь","Октябрь","Ноябрь","Декабрь"];return t.jsx(P,{controls:m,children:t.jsxs(L,{column:!0,children:[t.jsxs("div",{className:h.controls,children:[t.jsxs("div",{className:h.monthWrapper,children:[t.jsx(N,{cs:{inner:h.monthButtonInner},icon:R,onClick:u}),t.jsx("div",{className:h.month,children:$[d]}),t.jsx(N,{cs:{inner:h.monthButtonInner,icon:h.nextMonthIcon},icon:R,onClick:p})]}),t.jsxs("div",{className:h.yearWrapper,children:[t.jsx(N,{className:h.yearButton,cs:{inner:h.yearButtonInner,icon:h.nextYearIcon},icon:R,onClick:j}),t.jsx(N,{className:h.yearButton,cs:{inner:h.yearButtonInner,icon:h.prevYearIcon},icon:R,onClick:E}),t.jsx("div",{className:h.year,children:w})]})]}),t.jsxs("div",{className:h.days,children:[["Пн","Вт","Ср","Чт","Пт","Сб","Вс"].map(c=>t.jsx("div",{className:h.weekday,children:c},c)),Array.from({length:Y}).map((c,f)=>t.jsx("div",{},f)),Array.from({length:y}).map((c,f)=>t.jsx(b,{cs:{inner:ee(h.monthDayInner,Number(s)===f+1&&Number(a)===d+1&&Number(r)===w&&h.selected)},onClick:()=>{const I=x(`${f+1}.${d+1}.${w}`,"D.M.Y");e(I.format("DD"),I.format("MM"),I.format("YYYY")),m.close()},children:f+1},f))]}),t.jsxs(L,{children:[t.jsx(b,{onClick:()=>{const c=x().subtract(1,"day");e(c.format("DD"),c.format("MM"),c.format("YYYY")),m.close()},children:"Вчера"}),t.jsx(b,{onClick:()=>{const c=x();e(c.format("DD"),c.format("MM"),c.format("YYYY")),m.close()},children:"Сегодня"}),t.jsx(b,{onClick:()=>{const c=x().add(1,"day");e(c.format("DD"),c.format("MM"),c.format("YYYY")),m.close()},children:"Завтра"}),t.jsx("div",{className:h.resetButtonWrapper,children:t.jsx(N,{cs:{inner:h.resetButtonInner},onClick:()=>{e("","",""),m.close()},icon:we})})]})]})})},Pe=e=>n.createElement("svg",{id:"\\u0421\\u043B\\u043E\\u0439_1",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",x:"0px",y:"0px",viewBox:"0 0 24 24",style:{enableBackground:"new 0 0 24 24"},xmlSpace:"preserve",fill:"currentColor",stroke:"transparent",...e},n.createElement("path",{d:"M21,4L21,4c0,1.1-0.9,2-2,2h0c-1.1,0-2-0.9-2-2v0c0-0.6-0.4-1-1-1H8C7.4,3,7,3.4,7,4v0c0,1.1-0.9,2-2,2h0C3.9,6,3,5.1,3,4v0 c0-0.6-0.4-1-1-1h0C0.9,3,0,3.9,0,5v13.5c0,2,1.6,3.5,3.5,3.5h16.9c2,0,3.5-1.6,3.5-3.5V5c0-1.1-0.9-2-2-2h0C21.4,3,21,3.4,21,4z  M19.8,20H4.2C3,20,2,19,2,17.8V9.2C2,8,3,7,4.2,7h15.6C21,7,22,8,22,9.2v8.6C22,19,21,20,19.8,20z"}),n.createElement("path",{d:"M5,5L5,5C4.4,5,4,4.6,4,4V2c0-0.6,0.4-1,1-1h0c0.6,0,1,0.4,1,1v2C6,4.6,5.6,5,5,5z"}),n.createElement("path",{d:"M19,5L19,5c-0.6,0-1-0.4-1-1V2c0-0.6,0.4-1,1-1h0c0.6,0,1,0.4,1,1v2C20,4.6,19.6,5,19,5z"}),n.createElement("path",{d:"M19.5,11h-12C7.2,11,7,10.8,7,10.5v0C7,10.2,7.2,10,7.5,10h12c0.3,0,0.5,0.2,0.5,0.5v0C20,10.8,19.8,11,19.5,11z"}),n.createElement("path",{d:"M19.5,14h-15C4.2,14,4,13.8,4,13.5v0C4,13.2,4.2,13,4.5,13h15c0.3,0,0.5,0.2,0.5,0.5v0C20,13.8,19.8,14,19.5,14z"}),n.createElement("path",{d:"M11.5,17h-7C4.2,17,4,16.8,4,16.5l0,0C4,16.2,4.2,16,4.5,16h7c0.3,0,0.5,0.2,0.5,0.5l0,0C12,16.8,11.8,17,11.5,17z"})),Re=n.memo(Pe),ze="_CalendarButton_8kpe7_1",Ve="_button_8kpe7_7",We="_inner_8kpe7_11",A={CalendarButton:ze,button:Ve,inner:We},Fe=({onClick:e})=>t.jsx("div",{className:A.CalendarButton,children:t.jsx(N,{className:A.button,cs:{inner:A.inner},icon:Re,onClick:e})}),Te="_inputs_180q0_1",qe="_short_180q0_7",Ae="_long_180q0_10",z={inputs:Te,short:qe,long:Ae};x.extend(O);const ct=n.memo(({label:e,name:s,rules:a,control:r,autoFocus:m})=>{const{field:{onChange:d,onBlur:g,ref:w,value:l},fieldState:{error:Y}}=X({name:s,rules:a,control:r}),y=n.useRef(null),u=n.useRef(null),p=n.useRef(null),[E,j]=n.useState(l!=null&&l.isValid()?l.format("DD"):""),[$,c]=n.useState(l!=null&&l.isValid()?l.format("MM"):""),[f,I]=n.useState(l!=null&&l.isValid()?l.format("YYYY"):"");n.useEffect(()=>{l!=null&&l.isValid()||d(x(""))},[]);const V=(o,v,M,C,_)=>{var U;const i=o.currentTarget,B=o.nativeEvent.inputType==="insertText",S=i.value;let k=S.replace(/\D/,"").substring(0,M),D=i.selectionStart;const te=new RegExp(`(.{${D-1}})(.)(.*)`),Q=(U=S.match(te))==null?void 0:U[2],ne=/\D/.test(Q);B&&ne&&D--,/[.,]/.test(Q)&&(k=k.padStart(M,"0")),C(k),requestAnimationFrame(()=>i.setSelectionRange(D,D)),_&&k.length>=M&&requestAnimationFrame(()=>{_.focus(),_.setSelectionRange(0,_.value.length)})},W=(o,v,M,C)=>{const _=o.currentTarget,i=_.selectionStart,B=i===_.selectionEnd,S=o.key;if(B)if(v&&(S==="ArrowLeft"||S==="Backspace")&&i===0){S==="Backspace"&&M(D=>D.substring(-1)),v.focus();const k=v.value.length;requestAnimationFrame(()=>v.setSelectionRange(k,k))}else C&&S==="ArrowRight"&&i===_.value.length&&(C.focus(),requestAnimationFrame(()=>C.setSelectionRange(0,0)))},F=(o,v,M,C)=>{let i=o.currentTarget.value;const B=Number(i);i===""?i="":Number.isNaN(B)||B<1?i="1":B>v&&(i=String(v)),i=i===""?i:i.padStart(M,"0"),C(i),requestAnimationFrame(()=>{const S=document.activeElement;S!==y.current&&S!==u.current&&S!==p.current&&(g(),G(E,$,f))})},G=(o,v,M)=>{if(o!==""||v!==""||M!==""){let C=x(M,["YYYY","YY"]);C.isValid()||(C=x()),C=C.format("YYYY");let _=x(v,["M","MM"]);_.isValid()||(_=x()),_=_.format("MM");let i=x(o,["D","DD"]);i.isValid()||(i=x()),i=i.format("DD");const B=x(`${i}.${_}.${C}`,["D.M.Y","DD.MM.YYYY"]);j(B.format("DD")),c(B.format("MM")),I(B.format("YYYY")),d(B)}else j(""),c(""),I(""),d(x(""))},T=o=>{const v=o.currentTarget;let M=v.value.length;requestAnimationFrame(()=>v.setSelectionRange(0,M))},J=H();return t.jsxs("label",{children:[t.jsx(K,{label:e,error:Y}),t.jsxs("div",{className:z.inputs,children:[t.jsx("input",{className:z.short,onFocus:T,onChange:o=>V(o,31,2,j,u.current),onBlur:o=>F(o,31,2,j),onKeyDown:o=>W(o,null,null,u.current),value:E,ref:ce(y,w),placeholder:"д",type:"text",inputMode:"decimal",autoFocus:m}),t.jsx("span",{children:"."}),t.jsx("input",{className:z.short,onFocus:T,onChange:o=>V(o,12,2,c,p.current),onBlur:o=>F(o,12,2,c),onKeyDown:o=>W(o,y.current,j,p.current),value:$,ref:u,placeholder:"м",type:"text",inputMode:"decimal"}),t.jsx("span",{children:"."}),t.jsx("input",{className:z.long,onFocus:T,onChange:o=>V(o,9999,4,I),onBlur:o=>F(o,9999,4,I),onKeyDown:o=>W(o,u.current,c,null),value:f,ref:p,placeholder:"г",type:"text",inputMode:"decimal"}),t.jsx(Fe,{onClick:J.open})]}),t.jsx(Le,{controls:J,day:E,month:$,year:f,setDate:G})]})}),Oe="_input_1rku8_1",Xe={input:Oe},ot=n.memo(({cs:e={},label:s,placeholder:a,name:r,rules:m,control:d,autoFocus:g})=>{const{field:{onChange:w,onBlur:l,value:Y,ref:y},fieldState:{error:u}}=X({name:r,rules:m,control:d});return t.jsxs("label",{children:[t.jsx(K,{className:e.header,label:s,error:u}),t.jsx("input",{className:Xe.input,onChange:w,onBlur:l,value:Y??"",ref:y,placeholder:a,type:"text",autoFocus:g})]})}),at=e=>({asc:s=>s.sort((a,r)=>a[e]-r[e]),desc:s=>s.sort((a,r)=>r[e]-a[e])}),lt=e=>({asc:s=>s.sort((a,r)=>{var m;return a[e]?r[e]?(m=a[e])==null?void 0:m.localeCompare(r[e]):-1:1}),desc:s=>s.sort((a,r)=>{var m;return a[e]?r[e]?(m=r[e])==null?void 0:m.localeCompare(a[e]):-1:1})}),He=e=>n.createElement("svg",{id:"\\u0421\\u043B\\u043E\\u0439_1",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",x:"0px",y:"0px",viewBox:"0 0 24 24",style:{enableBackground:"new 0 0 24 24"},xmlSpace:"preserve",fill:"currentColor",stroke:"transparent",...e},n.createElement("circle",{cx:12,cy:12,r:3}),n.createElement("circle",{cx:21,cy:12,r:3}),n.createElement("circle",{cx:3,cy:12,r:3})),ut=n.memo(He),it=e=>{const s=H();return s.point=e,s},mt=e=>{const s=window.getComputedStyle(e),a=e.getBoundingClientRect();return{x:a.left+parseInt(s.width)/2,y:a.top+parseInt(s.height)/2}},Ke="_ListCard_6yn4w_1",Ge={ListCard:Ke},dt=({tag:e="li",children:s,className:a,...r})=>t.jsx(e,{className:ee(Ge.ListCard,a),children:s}),Je=e=>n.createElement("svg",{id:"\\u0421\\u043B\\u043E\\u0439_1",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",x:"0px",y:"0px",viewBox:"0 0 24 24",style:{enableBackground:"new 0 0 24 24"},xmlSpace:"preserve",fill:"currentColor",stroke:"transparent",...e},n.createElement("path",{d:"M21.8,0.8l1.5,1.5c0.4,0.4,0.4,1.1,0,1.5L12.5,14.5c-0.3,0.3-0.7,0.5-1.2,0.6l-2.7,0.7c-0.3,0.1-0.6-0.2-0.5-0.5l0.7-2.7 c0.1-0.5,0.3-0.9,0.6-1.2L20.2,0.8C20.7,0.3,21.3,0.3,21.8,0.8z"}),n.createElement("path",{d:"M19,13.8v4.6c0,1.4-1.2,2.6-2.6,2.6H5.6C4.2,21,3,19.8,3,18.4V7.6C3,6.2,4.2,5,5.6,5h4.6c0.4,0,0.7-0.2,1-0.4l2-2 C13.4,2.4,13.3,2,13,2H4.9C2.2,2,0,4.2,0,6.9v12.2C0,21.8,2.2,24,4.9,24h12.2c2.7,0,4.9-2.2,4.9-4.9V11c0-0.3-0.4-0.4-0.6-0.2l-2,2 C19.2,13.1,19,13.5,19,13.8z"})),ht=n.memo(Je),Qe="_inner_tbd0a_1",Ue={inner:Qe},xt=({children:e,controls:s,...a})=>{const[r,m]=n.useState(null),[d,g]=n.useState(null),[w,l]=n.useState(null),[Y,y]=n.useState(null);return n.useEffect(()=>{if(!s.ref.current)return;const u=window.getComputedStyle(s.ref.current),p=s.point(),E=window.innerWidth>p.x+parseInt(u.width),j=window.innerHeight>p.y+parseInt(u.height);m(E?p.x:p.x-parseInt(u.width)),g(j?p.y:p.y-parseInt(u.height)),l(E?"-5px":"calc(100% + 5px)"),y(j?"-5px":"calc(100% + 5px)")},[s,s.point]),t.jsx(P,{cs:{inner:Ue.inner},innerStyle:{left:r,top:d,"--xOrigin":w,"--yOrigin":Y},background:!1,controls:s,...a,children:e})};export{xt as C,ct as D,ot as I,dt as L,ht as M,rt as P,st as S,ut as a,tt as b,mt as c,nt as d,at as n,lt as s,it as u};
