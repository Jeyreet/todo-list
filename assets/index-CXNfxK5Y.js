import{j as e,T as v,G as x,I as j,L as s,M as T,B as R,r as u,u as w}from"./index-Drd5J5gP.js";import{C as y}from"./Collapser-DASlPNaZ.js";import{a as G,b as C,M as V,P as $,A as D,S as M,u as W,H as A}from"./Switch-DnfmqdMb.js";import{A as F}from"./AreaInput-ffvJxGgb.js";import{R as E}from"./Radio-CdEP7qV-.js";const X={},H="_inner_1ualu_1",q="_storeButton_1ualu_5",z="_importIcon_1ualu_9",U="_exportIcon_1ualu_13",J="_gap_1ualu_17",i={inner:H,storeButton:q,importIcon:z,exportIcon:U,gap:J},K=()=>{const t=G(),{control:o,getValues:r,setValue:a}=C(),n=()=>s.import(r("store")),l=()=>{const c=s.export();a("store",c),navigator.clipboard.writeText(c)};return e.jsxs(e.Fragment,{children:[e.jsx(v,{indent:!0,children:"Хранилище"}),e.jsx(F,{label:"Импорт и экспорт",placeholder:"Ваши данные...",name:"store",control:o}),e.jsxs(x,{className:i.gap,children:[e.jsx(j,{className:i.storeButton,cs:{icon:i.importIcon},icon:T,label:"Импорт",onClick:n}),e.jsx(j,{className:i.storeButton,cs:{icon:i.exportIcon},icon:T,label:"Экспорт",onClick:l}),e.jsx(j,{className:i.storeButton,cs:{inner:i.inner},icon:V,label:"Сброс",onClick:t.open})]}),e.jsx($,{controls:t,maxWidth:450,children:e.jsxs(x,{column:!0,children:[e.jsx(v,{children:"Сброс"}),e.jsx("p",{children:"Вы уверены, что хотите полностью очистить хранилище? Это действие невозможно отменить!"}),e.jsxs(D,{children:[e.jsx(R,{cs:{inner:i.inner},onClick:()=>{s.reset(),t.close()},children:"Подтвердить"}),e.jsx(R,{onClick:t.close,children:"Отменить сброс"})]})]})})]})},O=()=>{const t=s.enableTaskRemoveConfirmation,o=s.disableTaskRemoveConfirmation,{control:r,watch:a}=C({mode:"onChange",defaultValues:{tasksRemoveConfirmation:s.getTaskRemoveConfirmation()}}),n=a("tasksRemoveConfirmation");return u.useEffect(()=>{n?t():o()},[o,t,n]),e.jsxs(e.Fragment,{children:[e.jsx(v,{children:"Задачи"}),e.jsx(M,{name:"tasksRemoveConfirmation",label:"Подтверждение удаления задачи",control:r})]})},Q=(t,o,r)=>(clearTimeout(t),setTimeout(o,r)),Y="_input_16urk_1",Z="_line_16urk_12",ee="_selectorPosition_16urk_20",te="_selectorWrapper_16urk_30",se="_selector_16urk_20",h={input:Y,line:Z,selectorPosition:ee,selectorWrapper:te,selector:se},B=t=>t<0?0:t>100?100:t,oe=({label:t,name:o,placeholder:r,rules:a,control:n,autoFocus:l})=>{const{field:{onChange:c,onBlur:S,value:b,ref:I},fieldState:{error:L}}=W({name:o,rules:a,control:n}),N=m=>{const d=m.target,f=Number(d.value.replace(/\D/,""));c(B(f))},_=m=>{m.preventDefault();const d=m.type==="touchstart",f=m.currentTarget.getBoundingClientRect(),p=k=>{const P=((d?k.touches[0].clientX:k.clientX)-f.left)/f.width*100;c(B(Math.round(P)))};p(m);const g=()=>{d?(document.removeEventListener("touchmove",p),document.removeEventListener("touchend",g)):(document.removeEventListener("mousemove",p),document.removeEventListener("mouseup",g))};d?(document.addEventListener("touchmove",p),document.addEventListener("touchend",g)):(document.addEventListener("mousemove",p),document.addEventListener("mouseup",g))};return e.jsxs("label",{children:[e.jsx(A,{label:t,error:L}),e.jsxs(x,{children:[e.jsx("div",{className:h.line,onMouseDown:_,onTouchStart:_,children:e.jsx("div",{className:h.selectorPosition,style:{left:`${b}%`},children:e.jsx("div",{className:h.selectorWrapper,children:e.jsx("div",{className:h.selector})})})}),e.jsx("input",{className:h.input,onChange:N,onBlur:S,value:b??"",ref:I,placeholder:r,type:"text",autoFocus:l})]})]})},ne="_gap_1oqve_1",re={gap:ne},ae=()=>{const{control:t,watch:o}=C({mode:"onChange",defaultValues:{themeMainColor:s.getThemeMainColor(),borderRadius:s.getBorderRadius(),theme:s.getTheme(),gap:s.getGap()}}),r=o("themeMainColor"),a=o("borderRadius"),n=o("theme"),l=o("gap");let c=u.useRef(null);return u.useEffect(()=>{c.current=Q(c.current,()=>s.setThemeMainColor(r),200)},[r]),u.useEffect(()=>{a?s.enableBorderRadius():s.disableBorderRadius()},[a]),u.useEffect(()=>{n==="system"?s.clearTheme():n==="light"?s.setLightTheme():n==="dark"&&s.setDarkTheme()},[n]),u.useEffect(()=>{l==="small"?s.setSmallGap():l==="big"?s.setBigGap():l==="standard"&&s.setStandardGap()},[l]),e.jsxs(e.Fragment,{children:[e.jsx(v,{indent:!0,children:"Визуальное оформление"}),e.jsx(oe,{name:"themeMainColor",label:"Основной цвет",control:t}),e.jsx(M,{name:"borderRadius",label:"Скругления углов",control:t}),e.jsxs(x,{className:re.gap,children:[e.jsx(E,{name:"theme",label:"Тема",options:[{value:"light",label:"Светлая"},{value:"dark",label:"Темная"},{value:"system",label:"Как в системе"}],control:t}),e.jsx(E,{name:"gap",label:"Отступы",options:[{value:"small",label:"Маленькие"},{value:"standard",label:"Стандартные"},{value:"big",label:"Большие"}],control:t})]})]})},pe=()=>{const t=w(o=>o.setCurrentPageTitle);return u.useLayoutEffect(()=>t("Настройки")),e.jsx(y,{children:e.jsxs(x,{column:!0,className:X.Settings,children:[e.jsx(O,{}),e.jsx(ae,{}),e.jsx(K,{})]})})};export{pe as Settings};
