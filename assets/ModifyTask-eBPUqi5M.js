import{u as o,r as i,f as g,g as r,j as e,m,B as c}from"./index-8MgR8TBQ.js";import{T as O}from"./calendar-B-PNqM_L.js";import{A as v}from"./AreaInput-C8P7-oB-.js";import{D as u,i as A,a as B}from"./isSameOrAfter-B3sj8mfU.js";r.extend(A);r.extend(B);const I=({id:n})=>{const f=o(s=>s.isModalOpen),l=o(s=>s.closeModal),x=o(s=>s.modifyTask),{name:j,desc:p,start:h,end:b}=i.useMemo(()=>o.getState().getTask(n),[]),{control:a,formState:{isValid:S},handleSubmit:y,watch:d,setValue:M}=g({mode:"onChange",defaultValues:{name:j,desc:p,start:h,end:b}}),T=s=>{x(n,s),l()},t=d("start"),k=d("end");return i.useEffect(()=>{r(k).isBefore(t)&&M("end",t)},[t]),e.jsx(e.Fragment,{children:e.jsxs("form",{onSubmit:y(T),children:[e.jsxs("div",{className:m.scroller,children:[e.jsx(O,{name:"name",label:"Название",rules:{required:"обязательное"},autoFocus:f,control:a}),e.jsx(v,{name:"desc",label:"Описание",control:a}),e.jsx(u,{name:"start",label:"Начало",control:a}),e.jsx(u,{name:"end",label:"Конец",rules:{validate:s=>r(s).isSameOrAfter(t)||"не может быть раньше начала"},control:a})]}),e.jsxs("div",{className:m.actions,children:[e.jsx(c,{visualDisabled:!S,type:"submit",children:"Сохранить"}),e.jsx(c,{onClick:l,secondary:!0,children:"Отмена"})]})]})})};export{I as default};
