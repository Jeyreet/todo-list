import{L as n,r as a,j as e,T as b,G as f,I as C,M as E,B as k,u as y}from"./index-Cjmt35S_.js";import{C as V}from"./Collapser-CrOcLQbh.js";import{a as G,b as R,M as $,P as D,A as W,u as A,H as F}from"./trashcan-DwAlcm7J.js";import{S as P}from"./Switch-CIphW_gn.js";import{A as X}from"./AreaInput-D-tPrfsg.js";import{R as B}from"./Radio-BQV23woL.js";const q={},H=(t,o,r)=>(clearTimeout(t),setTimeout(o,r)),z="_inner_1ualu_1",U="_storeButton_1ualu_5",J="_importIcon_1ualu_9",K="_exportIcon_1ualu_13",O="_gap_1ualu_17",u={inner:z,storeButton:U,importIcon:J,exportIcon:K,gap:O},Q=()=>{const t=G(),{control:o,getValues:r,setValue:l,watch:s,handleSubmit:i}=R({mode:"onSubmit",defaultValues:{settingsImportProtection:n.getSettingsImportProtection()}}),c=s("settingsImportProtection");a.useEffect(()=>{c?n.enableSettingsImportProtection():n.disableSettingsImportProtection()},[c]);const _=()=>n.import(r("store")),g=()=>{const x=n.export();l("store",x),navigator.clipboard.writeText(x)};return e.jsxs(e.Fragment,{children:[e.jsx(b,{indent:!0,children:"Хранилище"}),e.jsxs("form",{onSubmit:i(_),children:[e.jsx(X,{label:"Импорт и экспорт",placeholder:"Ваши данные...",name:"store",rules:{required:"Заполните данные для импорта"},control:o}),e.jsx(P,{label:"Предотвратить импортирование настроек",name:"settingsImportProtection",control:o}),e.jsxs(f,{className:u.gap,children:[e.jsx(C,{className:u.storeButton,cs:{icon:u.importIcon},icon:E,label:"Импорт",type:"submit"}),e.jsx(C,{className:u.storeButton,cs:{icon:u.exportIcon},icon:E,label:"Экспорт",onClick:g}),e.jsx(C,{className:u.storeButton,cs:{inner:u.inner},icon:$,label:"Сброс",onClick:t.open})]})]}),e.jsx(D,{controls:t,maxWidth:450,children:e.jsxs(f,{column:!0,children:[e.jsx(b,{children:"Сброс"}),e.jsx("p",{children:"Вы уверены, что хотите полностью очистить хранилище? Это действие невозможно отменить!"}),e.jsxs(W,{children:[e.jsx(k,{cs:{inner:u.inner},onClick:()=>{n.reset(),t.close()},children:"Подтвердить"}),e.jsx(k,{onClick:t.close,children:"Отменить сброс"})]})]})})]})},Y=()=>{const t=n.enableTaskRemoveConfirmation,o=n.disableTaskRemoveConfirmation,{control:r,watch:l}=R({mode:"onChange",defaultValues:{tasksRemoveConfirmation:n.getTaskRemoveConfirmation()}}),s=l("tasksRemoveConfirmation");return a.useEffect(()=>{s?t():o()},[o,t,s]),e.jsxs(e.Fragment,{children:[e.jsx(b,{children:"Задачи"}),e.jsx(P,{name:"tasksRemoveConfirmation",label:"Подтверждение удаления задачи",control:r})]})},Z="_input_unprm_1",ee="_line_unprm_12",te="_linePadding_unprm_24",ne="_selectorPosition_unprm_30",oe="_selectorWrapper_unprm_40",se="_selector_unprm_30",m={input:Z,line:ee,linePadding:te,selectorPosition:ne,selectorWrapper:oe,selector:se},M=t=>t<0?0:t>100?100:t,re=({label:t,name:o,placeholder:r,rules:l,control:s,autoFocus:i})=>{const{field:{onChange:c,onBlur:_,value:g,ref:x},fieldState:{error:N}}=A({name:o,rules:l,control:s}),T=a.useRef(null),L=d=>{const p=d.target,j=Number(p.value.replace(/\D/,""));c(M(j))},I=d=>{d.preventDefault();const p=d.type==="touchstart",j=T.current.getBoundingClientRect(),h=S=>{const w=((p?S.touches[0].clientX:S.clientX)-j.left)/j.width*100;c(M(Math.round(w)))};h(d);const v=()=>{p?(document.removeEventListener("touchmove",h),document.removeEventListener("touchend",v)):(document.removeEventListener("mousemove",h),document.removeEventListener("mouseup",v))};p?(document.addEventListener("touchmove",h),document.addEventListener("touchend",v)):(document.addEventListener("mousemove",h),document.addEventListener("mouseup",v))};return e.jsxs("label",{children:[e.jsx(F,{label:t,error:N}),e.jsxs(f,{children:[e.jsx("div",{className:m.line,onMouseDown:I,onTouchStart:I,children:e.jsx("div",{className:m.linePadding,ref:T,children:e.jsx("div",{className:m.selectorPosition,style:{left:`${g}%`},children:e.jsx("div",{className:m.selectorWrapper,children:e.jsx("div",{className:m.selector})})})})}),e.jsx("input",{className:m.input,onChange:L,onBlur:_,value:g??"",ref:x,placeholder:r,type:"text",autoFocus:i})]})]})},ae="_gap_1oqve_1",le={gap:ae},ie=()=>{const{control:t,watch:o}=R({mode:"onChange",defaultValues:{themeMainColor:n.getThemeMainColor(),borderRadius:n.getBorderRadius(),theme:n.getTheme(),gap:n.getGap()}}),r=o("themeMainColor"),l=o("borderRadius"),s=o("theme"),i=o("gap");let c=a.useRef(null);return a.useEffect(()=>{c.current=H(c.current,()=>n.setThemeMainColor(r),200)},[r]),a.useEffect(()=>{l?n.enableBorderRadius():n.disableBorderRadius()},[l]),a.useEffect(()=>{s==="system"?n.clearTheme():s==="light"?n.setLightTheme():s==="dark"&&n.setDarkTheme()},[s]),a.useEffect(()=>{i==="small"?n.setSmallGap():i==="big"?n.setBigGap():i==="standard"&&n.setStandardGap()},[i]),e.jsxs(e.Fragment,{children:[e.jsx(b,{indent:!0,children:"Визуальное оформление"}),e.jsx(re,{name:"themeMainColor",label:"Основной цвет",control:t}),e.jsx(P,{name:"borderRadius",label:"Скругления углов",control:t}),e.jsxs(f,{className:le.gap,children:[e.jsx(B,{name:"theme",label:"Тема",options:[{value:"light",label:"Светлая"},{value:"dark",label:"Темная"},{value:"system",label:"Как в системе"}],control:t}),e.jsx(B,{name:"gap",label:"Отступы",options:[{value:"small",label:"Маленькие"},{value:"standard",label:"Стандартные"},{value:"big",label:"Большие"}],control:t})]})]})},ge=()=>{const t=y(o=>o.setCurrentPageTitle);return a.useLayoutEffect(()=>t("Настройки")),e.jsx(V,{children:e.jsxs(f,{column:!0,className:q.Settings,children:[e.jsx(Y,{}),e.jsx(ie,{}),e.jsx(Q,{})]})})};export{ge as Settings};
