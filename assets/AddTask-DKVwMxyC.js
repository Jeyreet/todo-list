import{R as D,j as _,c as Oe,r as ee,B as ne,b as Bt,u as Ie,m as tt}from"./index-B3hIxIdI.js";import{d as te,r as Ut}from"./Tasks-DX5IJz-S.js";var ve=e=>e.type==="checkbox",oe=e=>e instanceof Date,U=e=>e==null;const _t=e=>typeof e=="object";var E=e=>!U(e)&&!Array.isArray(e)&&_t(e)&&!oe(e),mt=e=>E(e)&&e.target?ve(e.target)?e.target.checked:e.target.value:e,Pt=e=>e.substring(0,e.search(/\.\d+(\.|$)/))||e,vt=(e,s)=>e.has(Pt(s)),$t=e=>{const s=e.constructor&&e.constructor.prototype;return E(s)&&s.hasOwnProperty("isPrototypeOf")},Te=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function N(e){let s;const t=Array.isArray(e),i=typeof FileList<"u"?e instanceof FileList:!1;if(e instanceof Date)s=new Date(e);else if(e instanceof Set)s=new Set(e);else if(!(Te&&(e instanceof Blob||i))&&(t||E(e)))if(s=t?[]:{},!t&&!$t(e))s=e;else for(const a in e)e.hasOwnProperty(a)&&(s[a]=N(e[a]));else return e;return s}var we=e=>Array.isArray(e)?e.filter(Boolean):[],S=e=>e===void 0,y=(e,s,t)=>{if(!s||!E(e))return t;const i=we(s.split(/[,[\].]+?/)).reduce((a,l)=>U(a)?a:a[l],e);return S(i)||i===e?S(e[s])?t:e[s]:i},Y=e=>typeof e=="boolean",Le=e=>/^\w*$/.test(e),bt=e=>we(e.replace(/["|']|\]/g,"").split(/\.|\[/)),k=(e,s,t)=>{let i=-1;const a=Le(s)?[s]:bt(s),l=a.length,u=l-1;for(;++i<l;){const d=a[i];let m=t;if(i!==u){const A=e[d];m=E(A)||Array.isArray(A)?A:isNaN(+a[i+1])?{}:[]}if(d==="__proto__"||d==="constructor"||d==="prototype")return;e[d]=m,e=e[d]}};const Fe={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},H={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},Z={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},Yt=D.createContext(null),Be=()=>D.useContext(Yt);var xt=(e,s,t,i=!0)=>{const a={defaultValues:s._defaultValues};for(const l in e)Object.defineProperty(a,l,{get:()=>{const u=l;return s._proxyFormState[u]!==H.all&&(s._proxyFormState[u]=!i||H.all),t&&(t[u]=!0),e[u]}});return a};function qt(e){const s=Be(),{control:t=s.control,disabled:i,name:a,exact:l}=e||{},[u,d]=D.useState(t._formState),m=D.useRef({isDirty:!1,isLoading:!1,dirtyFields:!1,touchedFields:!1,validatingFields:!1,isValidating:!1,isValid:!1,errors:!1}),A=D.useRef(a);return A.current=a,D.useEffect(()=>t._subscribe({name:A.current,formState:m.current,exact:l,callback:v=>{!i&&d({...t._formState,...v})}}),[t,i,l]),D.useEffect(()=>{m.current.isValid&&t._setValid(!0)},[t]),D.useMemo(()=>xt(u,t,m.current,!1),[u,t])}var Q=e=>typeof e=="string",Vt=(e,s,t,i,a)=>Q(e)?(i&&s.watch.add(e),y(t,e,a)):Array.isArray(e)?e.map(l=>(i&&s.watch.add(l),y(t,l))):(i&&(s.watchAll=!0),t);function Wt(e){const s=Be(),{control:t=s.control,name:i,defaultValue:a,disabled:l,exact:u}=e||{},d=D.useRef(i),m=D.useRef(a);d.current=i,D.useEffect(()=>t._subscribe({name:d.current,formState:{values:!0},exact:u,callback:F=>!l&&v(Vt(d.current,t._names,F.values||t._formValues,!1,m.current))}),[t,l,u]);const[A,v]=D.useState(t._getWatch(i,a));return D.useEffect(()=>t._removeUnmounted()),A}function Ue(e){const s=Be(),{name:t,disabled:i,control:a=s.control,shouldUnregister:l}=e,u=vt(a._names.array,t),d=Wt({control:a,name:t,defaultValue:y(a._formValues,t,y(a._defaultValues,t,e.defaultValue)),exact:!0}),m=qt({control:a,name:t,exact:!0}),A=D.useRef(e),v=D.useRef(a.register(t,{...e.rules,value:d,...Y(e.disabled)?{disabled:e.disabled}:{}})),F=D.useMemo(()=>Object.defineProperties({},{invalid:{enumerable:!0,get:()=>!!y(m.errors,t)},isDirty:{enumerable:!0,get:()=>!!y(m.dirtyFields,t)},isTouched:{enumerable:!0,get:()=>!!y(m.touchedFields,t)},isValidating:{enumerable:!0,get:()=>!!y(m.validatingFields,t)},error:{enumerable:!0,get:()=>y(m.errors,t)}}),[m,t]),x=D.useCallback(T=>v.current.onChange({target:{value:mt(T),name:t},type:Fe.CHANGE}),[t]),ae=D.useCallback(()=>v.current.onBlur({target:{value:y(a._formValues,t),name:t},type:Fe.BLUR}),[t,a._formValues]),W=D.useCallback(T=>{const L=y(a._fields,t);L&&T&&(L._f.ref={focus:()=>T.focus(),select:()=>T.select(),setCustomValidity:b=>T.setCustomValidity(b),reportValidity:()=>T.reportValidity()})},[a._fields,t]),R=D.useMemo(()=>({name:t,value:d,...Y(i)||m.disabled?{disabled:m.disabled||i}:{},onChange:x,onBlur:ae,ref:W}),[t,i,m.disabled,x,ae,W,d]);return D.useEffect(()=>{const T=a._options.shouldUnregister||l;a.register(t,{...A.current.rules,...Y(A.current.disabled)?{disabled:A.current.disabled}:{}});const L=(b,G)=>{const $=y(a._fields,b);$&&$._f&&($._f.mount=G)};if(L(t,!0),T){const b=N(y(a._options.defaultValues,t));k(a._defaultValues,t,b),S(y(a._formValues,t))&&k(a._formValues,t,b)}return!u&&a.register(t),()=>{(u?T&&!a._state.action:T)?a.unregister(t):L(t,!1)}},[t,a,u,l]),D.useEffect(()=>{a._setDisabledField({disabled:i,name:t})},[i,t,a]),D.useMemo(()=>({field:R,formState:m,fieldState:F}),[R,m,F])}var Gt=(e,s,t,i,a)=>s?{...t[e],types:{...t[e]&&t[e].types?t[e].types:{},[i]:a||!0}}:{},_e=e=>Array.isArray(e)?e:[e],st=()=>{let e=[];return{get observers(){return e},next:a=>{for(const l of e)l.next&&l.next(a)},subscribe:a=>(e.push(a),{unsubscribe:()=>{e=e.filter(l=>l!==a)}}),unsubscribe:()=>{e=[]}}},Ne=e=>U(e)||!_t(e);function ie(e,s){if(Ne(e)||Ne(s))return e===s;if(oe(e)&&oe(s))return e.getTime()===s.getTime();const t=Object.keys(e),i=Object.keys(s);if(t.length!==i.length)return!1;for(const a of t){const l=e[a];if(!i.includes(a))return!1;if(a!=="ref"){const u=s[a];if(oe(l)&&oe(u)||E(l)&&E(u)||Array.isArray(l)&&Array.isArray(u)?!ie(l,u):l!==u)return!1}}return!0}var B=e=>E(e)&&!Object.keys(e).length,Pe=e=>e.type==="file",z=e=>typeof e=="function",De=e=>{if(!Te)return!1;const s=e?e.ownerDocument:0;return e instanceof(s&&s.defaultView?s.defaultView.HTMLElement:HTMLElement)},Ft=e=>e.type==="select-multiple",$e=e=>e.type==="radio",Ht=e=>$e(e)||ve(e),Re=e=>De(e)&&e.isConnected;function zt(e,s){const t=s.slice(0,-1).length;let i=0;for(;i<t;)e=S(e)?i++:e[s[i++]];return e}function Kt(e){for(const s in e)if(e.hasOwnProperty(s)&&!S(e[s]))return!1;return!0}function M(e,s){const t=Array.isArray(s)?s:Le(s)?[s]:bt(s),i=t.length===1?e:zt(e,t),a=t.length-1,l=t[a];return i&&delete i[l],a!==0&&(E(i)&&B(i)||Array.isArray(i)&&Kt(i))&&M(e,t.slice(0,-1)),e}var Dt=e=>{for(const s in e)if(z(e[s]))return!0;return!1};function pe(e,s={}){const t=Array.isArray(e);if(E(e)||t)for(const i in e)Array.isArray(e[i])||E(e[i])&&!Dt(e[i])?(s[i]=Array.isArray(e[i])?[]:{},pe(e[i],s[i])):U(e[i])||(s[i]=!0);return s}function pt(e,s,t){const i=Array.isArray(e);if(E(e)||i)for(const a in e)Array.isArray(e[a])||E(e[a])&&!Dt(e[a])?S(s)||Ne(t[a])?t[a]=Array.isArray(e[a])?pe(e[a],[]):{...pe(e[a])}:pt(e[a],U(s)?{}:s[a],t[a]):t[a]=!ie(e[a],s[a]);return t}var he=(e,s)=>pt(e,s,pe(s));const rt={value:!1,isValid:!1},it={value:!0,isValid:!0};var At=e=>{if(Array.isArray(e)){if(e.length>1){const s=e.filter(t=>t&&t.checked&&!t.disabled).map(t=>t.value);return{value:s,isValid:!!s.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!S(e[0].attributes.value)?S(e[0].value)||e[0].value===""?it:{value:e[0].value,isValid:!0}:it:rt}return rt},wt=(e,{valueAsNumber:s,valueAsDate:t,setValueAs:i})=>S(e)?e:s?e===""?NaN:e&&+e:t&&Q(e)?new Date(e):i?i(e):e;const nt={isValid:!1,value:null};var kt=e=>Array.isArray(e)?e.reduce((s,t)=>t&&t.checked&&!t.disabled?{isValid:!0,value:t.value}:s,nt):nt;function at(e){const s=e.ref;return Pe(s)?s.files:$e(s)?kt(e.refs).value:Ft(s)?[...s.selectedOptions].map(({value:t})=>t):ve(s)?At(e.refs).value:wt(S(s.value)?e.ref.value:s.value,e)}var Jt=(e,s,t,i)=>{const a={};for(const l of e){const u=y(s,l);u&&k(a,l,u._f)}return{criteriaMode:t,names:[...e],fields:a,shouldUseNativeValidation:i}},Ae=e=>e instanceof RegExp,ge=e=>S(e)?e:Ae(e)?e.source:E(e)?Ae(e.value)?e.value.source:e.value:e,lt=e=>({isOnSubmit:!e||e===H.onSubmit,isOnBlur:e===H.onBlur,isOnChange:e===H.onChange,isOnAll:e===H.all,isOnTouch:e===H.onTouched});const ot="AsyncFunction";var Qt=e=>!!e&&!!e.validate&&!!(z(e.validate)&&e.validate.constructor.name===ot||E(e.validate)&&Object.values(e.validate).find(s=>s.constructor.name===ot)),Xt=e=>e.mount&&(e.required||e.min||e.max||e.maxLength||e.minLength||e.pattern||e.validate),ut=(e,s,t)=>!t&&(s.watchAll||s.watch.has(e)||[...s.watch].some(i=>e.startsWith(i)&&/^\.\w+/.test(e.slice(i.length))));const me=(e,s,t,i)=>{for(const a of t||Object.keys(e)){const l=y(e,a);if(l){const{_f:u,...d}=l;if(u){if(u.refs&&u.refs[0]&&s(u.refs[0],a)&&!i)return!0;if(u.ref&&s(u.ref,u.name)&&!i)return!0;if(me(d,s))break}else if(E(d)&&me(d,s))break}}};function ct(e,s,t){const i=y(e,t);if(i||Le(t))return{error:i,name:t};const a=t.split(".");for(;a.length;){const l=a.join("."),u=y(s,l),d=y(e,l);if(u&&!Array.isArray(u)&&t!==l)return{name:t};if(d&&d.type)return{name:l,error:d};a.pop()}return{name:t}}var Zt=(e,s,t,i)=>{t(e);const{name:a,...l}=e;return B(l)||Object.keys(l).length>=Object.keys(s).length||Object.keys(l).find(u=>s[u]===(!i||H.all))},es=(e,s,t)=>!e||!s||e===s||_e(e).some(i=>i&&(t?i===s:i.startsWith(s)||s.startsWith(i))),ts=(e,s,t,i,a)=>a.isOnAll?!1:!t&&a.isOnTouch?!(s||e):(t?i.isOnBlur:a.isOnBlur)?!e:(t?i.isOnChange:a.isOnChange)?e:!0,ss=(e,s)=>!we(y(e,s)).length&&M(e,s),rs=(e,s,t)=>{const i=_e(y(e,t));return k(i,"root",s[t]),k(e,t,i),e},Ve=e=>Q(e);function dt(e,s,t="validate"){if(Ve(e)||Array.isArray(e)&&e.every(Ve)||Y(e)&&!e)return{type:t,message:Ve(e)?e:"",ref:s}}var ue=e=>E(e)&&!Ae(e)?e:{value:e,message:""},ft=async(e,s,t,i,a,l)=>{const{ref:u,refs:d,required:m,maxLength:A,minLength:v,min:F,max:x,pattern:ae,validate:W,name:R,valueAsNumber:T,mount:L}=e._f,b=y(t,R);if(!L||s.has(R))return{};const G=d?d[0]:u,$=w=>{a&&G.reportValidity&&(G.setCustomValidity(Y(w)?"":w||""),G.reportValidity())},I={},de=$e(u),fe=ve(u),ke=de||fe,K=(T||Pe(u))&&S(u.value)&&S(b)||De(u)&&u.value===""||b===""||Array.isArray(b)&&!b.length,le=Gt.bind(null,R,i,I),X=(w,V,C,P=Z.maxLength,q=Z.minLength)=>{const J=w?V:C;I[R]={type:w?P:q,message:J,ref:u,...le(w?P:q,J)}};if(l?!Array.isArray(b)||!b.length:m&&(!ke&&(K||U(b))||Y(b)&&!b||fe&&!At(d).isValid||de&&!kt(d).isValid)){const{value:w,message:V}=Ve(m)?{value:!!m,message:m}:ue(m);if(w&&(I[R]={type:Z.required,message:V,ref:G,...le(Z.required,V)},!i))return $(V),I}if(!K&&(!U(F)||!U(x))){let w,V;const C=ue(x),P=ue(F);if(!U(b)&&!isNaN(b)){const q=u.valueAsNumber||b&&+b;U(C.value)||(w=q>C.value),U(P.value)||(V=q<P.value)}else{const q=u.valueAsDate||new Date(b),J=be=>new Date(new Date().toDateString()+" "+be),re=u.type=="time",ye=u.type=="week";Q(C.value)&&b&&(w=re?J(b)>J(C.value):ye?b>C.value:q>new Date(C.value)),Q(P.value)&&b&&(V=re?J(b)<J(P.value):ye?b<P.value:q<new Date(P.value))}if((w||V)&&(X(!!w,C.message,P.message,Z.max,Z.min),!i))return $(I[R].message),I}if((A||v)&&!K&&(Q(b)||l&&Array.isArray(b))){const w=ue(A),V=ue(v),C=!U(w.value)&&b.length>+w.value,P=!U(V.value)&&b.length<+V.value;if((C||P)&&(X(C,w.message,V.message),!i))return $(I[R].message),I}if(ae&&!K&&Q(b)){const{value:w,message:V}=ue(ae);if(Ae(w)&&!b.match(w)&&(I[R]={type:Z.pattern,message:V,ref:u,...le(Z.pattern,V)},!i))return $(V),I}if(W){if(z(W)){const w=await W(b,t),V=dt(w,G);if(V&&(I[R]={...V,...le(Z.validate,V.message)},!i))return $(V.message),I}else if(E(W)){let w={};for(const V in W){if(!B(w)&&!i)break;const C=dt(await W[V](b,t),G,V);C&&(w={...C,...le(V,C.message)},$(C.message),i&&(I[R]=w))}if(!B(w)&&(I[R]={ref:G,...w},!i))return I}}return $(!0),I};const is={mode:H.onSubmit,reValidateMode:H.onChange,shouldFocusError:!0};function ns(e={}){let s={...is,...e},t={submitCount:0,isDirty:!1,isLoading:z(s.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:s.errors||{},disabled:s.disabled||!1};const i={};let a=E(s.defaultValues)||E(s.values)?N(s.values||s.defaultValues)||{}:{},l=s.shouldUnregister?{}:N(a),u={action:!1,mount:!1,watch:!1},d={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},m,A=0;const v={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1};let F={...v};const x={array:st(),state:st()},ae=lt(s.mode),W=lt(s.reValidateMode),R=s.criteriaMode===H.all,T=r=>n=>{clearTimeout(A),A=setTimeout(r,n)},L=async r=>{if(!s.disabled&&(v.isValid||F.isValid||r)){const n=s.resolver?B((await K()).errors):await X(i,!0);n!==t.isValid&&x.state.next({isValid:n})}},b=(r,n)=>{!s.disabled&&(v.isValidating||v.validatingFields||F.isValidating||F.validatingFields)&&((r||Array.from(d.mount)).forEach(o=>{o&&(n?k(t.validatingFields,o,n):M(t.validatingFields,o))}),x.state.next({validatingFields:t.validatingFields,isValidating:!B(t.validatingFields)}))},G=(r,n=[],o,h,f=!0,c=!0)=>{if(h&&o&&!s.disabled){if(u.action=!0,c&&Array.isArray(y(i,r))){const g=o(y(i,r),h.argA,h.argB);f&&k(i,r,g)}if(c&&Array.isArray(y(t.errors,r))){const g=o(y(t.errors,r),h.argA,h.argB);f&&k(t.errors,r,g),ss(t.errors,r)}if((v.touchedFields||F.touchedFields)&&c&&Array.isArray(y(t.touchedFields,r))){const g=o(y(t.touchedFields,r),h.argA,h.argB);f&&k(t.touchedFields,r,g)}(v.dirtyFields||F.dirtyFields)&&(t.dirtyFields=he(a,l)),x.state.next({name:r,isDirty:V(r,n),dirtyFields:t.dirtyFields,errors:t.errors,isValid:t.isValid})}else k(l,r,n)},$=(r,n)=>{k(t.errors,r,n),x.state.next({errors:t.errors})},I=r=>{t.errors=r,x.state.next({errors:t.errors,isValid:!1})},de=(r,n,o,h)=>{const f=y(i,r);if(f){const c=y(l,r,S(o)?y(a,r):o);S(c)||h&&h.defaultChecked||n?k(l,r,n?c:at(f._f)):q(r,c),u.mount&&L()}},fe=(r,n,o,h,f)=>{let c=!1,g=!1;const p={name:r};if(!s.disabled){if(!o||h){(v.isDirty||F.isDirty)&&(g=t.isDirty,t.isDirty=p.isDirty=V(),c=g!==p.isDirty);const j=ie(y(a,r),n);g=!!y(t.dirtyFields,r),j?M(t.dirtyFields,r):k(t.dirtyFields,r,!0),p.dirtyFields=t.dirtyFields,c=c||(v.dirtyFields||F.dirtyFields)&&g!==!j}if(o){const j=y(t.touchedFields,r);j||(k(t.touchedFields,r,o),p.touchedFields=t.touchedFields,c=c||(v.touchedFields||F.touchedFields)&&j!==o)}c&&f&&x.state.next(p)}return c?p:{}},ke=(r,n,o,h)=>{const f=y(t.errors,r),c=(v.isValid||F.isValid)&&Y(n)&&t.isValid!==n;if(s.delayError&&o?(m=T(()=>$(r,o)),m(s.delayError)):(clearTimeout(A),m=null,o?k(t.errors,r,o):M(t.errors,r)),(o?!ie(f,o):f)||!B(h)||c){const g={...h,...c&&Y(n)?{isValid:n}:{},errors:t.errors,name:r};t={...t,...g},x.state.next(g)}},K=async r=>{b(r,!0);const n=await s.resolver(l,s.context,Jt(r||d.mount,i,s.criteriaMode,s.shouldUseNativeValidation));return b(r),n},le=async r=>{const{errors:n}=await K(r);if(r)for(const o of r){const h=y(n,o);h?k(t.errors,o,h):M(t.errors,o)}else t.errors=n;return n},X=async(r,n,o={valid:!0})=>{for(const h in r){const f=r[h];if(f){const{_f:c,...g}=f;if(c){const p=d.array.has(c.name),j=f._f&&Qt(f._f);j&&v.validatingFields&&b([h],!0);const O=await ft(f,d.disabled,l,R,s.shouldUseNativeValidation&&!n,p);if(j&&v.validatingFields&&b([h]),O[c.name]&&(o.valid=!1,n))break;!n&&(y(O,c.name)?p?rs(t.errors,O,c.name):k(t.errors,c.name,O[c.name]):M(t.errors,c.name))}!B(g)&&await X(g,n,o)}}return o.valid},w=()=>{for(const r of d.unMount){const n=y(i,r);n&&(n._f.refs?n._f.refs.every(o=>!Re(o)):!Re(n._f.ref))&&Se(r)}d.unMount=new Set},V=(r,n)=>!s.disabled&&(r&&n&&k(l,r,n),!ie(Ye(),a)),C=(r,n,o)=>Vt(r,d,{...u.mount?l:S(n)?a:Q(r)?{[r]:n}:n},o,n),P=r=>we(y(u.mount?l:a,r,s.shouldUnregister?y(a,r,[]):[])),q=(r,n,o={})=>{const h=y(i,r);let f=n;if(h){const c=h._f;c&&(!c.disabled&&k(l,r,wt(n,c)),f=De(c.ref)&&U(n)?"":n,Ft(c.ref)?[...c.ref.options].forEach(g=>g.selected=f.includes(g.value)):c.refs?ve(c.ref)?c.refs.length>1?c.refs.forEach(g=>(!g.defaultChecked||!g.disabled)&&(g.checked=Array.isArray(f)?!!f.find(p=>p===g.value):f===g.value)):c.refs[0]&&(c.refs[0].checked=!!f):c.refs.forEach(g=>g.checked=g.value===f):Pe(c.ref)?c.ref.value="":(c.ref.value=f,c.ref.type||x.state.next({name:r,values:N(l)})))}(o.shouldDirty||o.shouldTouch)&&fe(r,f,o.shouldTouch,o.shouldDirty,!0),o.shouldValidate&&Ce(r)},J=(r,n,o)=>{for(const h in n){const f=n[h],c=`${r}.${h}`,g=y(i,c);(d.array.has(r)||E(f)||g&&!g._f)&&!oe(f)?J(c,f,o):q(c,f,o)}},re=(r,n,o={})=>{const h=y(i,r),f=d.array.has(r),c=N(n);k(l,r,c),f?(x.array.next({name:r,values:N(l)}),(v.isDirty||v.dirtyFields||F.isDirty||F.dirtyFields)&&o.shouldDirty&&x.state.next({name:r,dirtyFields:he(a,l),isDirty:V(r,c)})):h&&!h._f&&!U(c)?J(r,c,o):q(r,c,o),ut(r,d)&&x.state.next({...t}),x.state.next({name:u.mount?r:void 0,values:N(l)})},ye=async r=>{u.mount=!0;const n=r.target;let o=n.name,h=!0;const f=y(i,o),c=g=>{h=Number.isNaN(g)||oe(g)&&isNaN(g.getTime())||ie(g,y(l,o,g))};if(f){let g,p;const j=n.type?at(f._f):mt(r),O=r.type===Fe.BLUR||r.type===Fe.FOCUS_OUT,Ot=!Xt(f._f)&&!s.resolver&&!y(t.errors,o)&&!f._f.deps||ts(O,y(t.touchedFields,o),t.isSubmitted,W,ae),je=ut(o,d,O);k(l,o,j),O?(f._f.onBlur&&f._f.onBlur(r),m&&m(0)):f._f.onChange&&f._f.onChange(r);const Me=fe(o,j,O),Tt=!B(Me)||je;if(!O&&x.state.next({name:o,type:r.type,values:N(l)}),Ot)return(v.isValid||F.isValid)&&(s.mode==="onBlur"?O&&L():O||L()),Tt&&x.state.next({name:o,...je?{}:Me});if(!O&&je&&x.state.next({...t}),s.resolver){const{errors:Ze}=await K([o]);if(c(j),h){const Lt=ct(t.errors,i,o),et=ct(Ze,i,Lt.name||o);g=et.error,o=et.name,p=B(Ze)}}else b([o],!0),g=(await ft(f,d.disabled,l,R,s.shouldUseNativeValidation))[o],b([o]),c(j),h&&(g?p=!1:(v.isValid||F.isValid)&&(p=await X(i,!0)));h&&(f._f.deps&&Ce(f._f.deps),ke(o,p,g,Me))}},be=(r,n)=>{if(y(t.errors,n)&&r.focus)return r.focus(),1},Ce=async(r,n={})=>{let o,h;const f=_e(r);if(s.resolver){const c=await le(S(r)?r:f);o=B(c),h=r?!f.some(g=>y(c,g)):o}else r?(h=(await Promise.all(f.map(async c=>{const g=y(i,c);return await X(g&&g._f?{[c]:g}:g)}))).every(Boolean),!(!h&&!t.isValid)&&L()):h=o=await X(i);return x.state.next({...!Q(r)||(v.isValid||F.isValid)&&o!==t.isValid?{}:{name:r},...s.resolver||!r?{isValid:o}:{},errors:t.errors}),n.shouldFocus&&!h&&me(i,be,r?f:d.mount),h},Ye=r=>{const n={...u.mount?l:a};return S(r)?n:Q(r)?y(n,r):r.map(o=>y(n,o))},qe=(r,n)=>({invalid:!!y((n||t).errors,r),isDirty:!!y((n||t).dirtyFields,r),error:y((n||t).errors,r),isValidating:!!y(t.validatingFields,r),isTouched:!!y((n||t).touchedFields,r)}),St=r=>{r&&_e(r).forEach(n=>M(t.errors,n)),x.state.next({errors:r?t.errors:{}})},We=(r,n,o)=>{const h=(y(i,r,{_f:{}})._f||{}).ref,f=y(t.errors,r)||{},{ref:c,message:g,type:p,...j}=f;k(t.errors,r,{...j,...n,ref:h}),x.state.next({name:r,errors:t.errors,isValid:!1}),o&&o.shouldFocus&&h&&h.focus&&h.focus()},Et=(r,n)=>z(r)?x.state.subscribe({next:o=>r(C(void 0,n),o)}):C(r,n,!0),Ge=r=>x.state.subscribe({next:n=>{es(r.name,n.name,r.exact)&&Zt(n,r.formState||v,Nt,r.reRenderRoot)&&r.callback({values:{...l},...t,...n})}}).unsubscribe,jt=r=>(u.mount=!0,F={...F,...r.formState},Ge({...r,formState:F})),Se=(r,n={})=>{for(const o of r?_e(r):d.mount)d.mount.delete(o),d.array.delete(o),n.keepValue||(M(i,o),M(l,o)),!n.keepError&&M(t.errors,o),!n.keepDirty&&M(t.dirtyFields,o),!n.keepTouched&&M(t.touchedFields,o),!n.keepIsValidating&&M(t.validatingFields,o),!s.shouldUnregister&&!n.keepDefaultValue&&M(a,o);x.state.next({values:N(l)}),x.state.next({...t,...n.keepDirty?{isDirty:V()}:{}}),!n.keepIsValid&&L()},He=({disabled:r,name:n})=>{(Y(r)&&u.mount||r||d.disabled.has(n))&&(r?d.disabled.add(n):d.disabled.delete(n))},Ee=(r,n={})=>{let o=y(i,r);const h=Y(n.disabled)||Y(s.disabled);return k(i,r,{...o||{},_f:{...o&&o._f?o._f:{ref:{name:r}},name:r,mount:!0,...n}}),d.mount.add(r),o?He({disabled:Y(n.disabled)?n.disabled:s.disabled,name:r}):de(r,!0,n.value),{...h?{disabled:n.disabled||s.disabled}:{},...s.progressive?{required:!!n.required,min:ge(n.min),max:ge(n.max),minLength:ge(n.minLength),maxLength:ge(n.maxLength),pattern:ge(n.pattern)}:{},name:r,onChange:ye,onBlur:ye,ref:f=>{if(f){Ee(r,n),o=y(i,r);const c=S(f.value)&&f.querySelectorAll&&f.querySelectorAll("input,select,textarea")[0]||f,g=Ht(c),p=o._f.refs||[];if(g?p.find(j=>j===c):c===o._f.ref)return;k(i,r,{_f:{...o._f,...g?{refs:[...p.filter(Re),c,...Array.isArray(y(a,r))?[{}]:[]],ref:{type:c.type,name:r}}:{ref:c}}}),de(r,!1,void 0,c)}else o=y(i,r,{}),o._f&&(o._f.mount=!1),(s.shouldUnregister||n.shouldUnregister)&&!(vt(d.array,r)&&u.action)&&d.unMount.add(r)}}},ze=()=>s.shouldFocusError&&me(i,be,d.mount),Mt=r=>{Y(r)&&(x.state.next({disabled:r}),me(i,(n,o)=>{const h=y(i,o);h&&(n.disabled=h._f.disabled||r,Array.isArray(h._f.refs)&&h._f.refs.forEach(f=>{f.disabled=h._f.disabled||r}))},0,!1))},Ke=(r,n)=>async o=>{let h;o&&(o.preventDefault&&o.preventDefault(),o.persist&&o.persist());let f=N(l);if(x.state.next({isSubmitting:!0}),s.resolver){const{errors:c,values:g}=await K();t.errors=c,f=g}else await X(i);if(d.disabled.size)for(const c of d.disabled)k(f,c,void 0);if(M(t.errors,"root"),B(t.errors)){x.state.next({errors:{}});try{await r(f,o)}catch(c){h=c}}else n&&await n({...t.errors},o),ze(),setTimeout(ze);if(x.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:B(t.errors)&&!h,submitCount:t.submitCount+1,errors:t.errors}),h)throw h},It=(r,n={})=>{y(i,r)&&(S(n.defaultValue)?re(r,N(y(a,r))):(re(r,n.defaultValue),k(a,r,N(n.defaultValue))),n.keepTouched||M(t.touchedFields,r),n.keepDirty||(M(t.dirtyFields,r),t.isDirty=n.defaultValue?V(r,N(y(a,r))):V()),n.keepError||(M(t.errors,r),v.isValid&&L()),x.state.next({...t}))},Je=(r,n={})=>{const o=r?N(r):a,h=N(o),f=B(r),c=f?a:h;if(n.keepDefaultValues||(a=o),!n.keepValues){if(n.keepDirtyValues){const g=new Set([...d.mount,...Object.keys(he(a,l))]);for(const p of Array.from(g))y(t.dirtyFields,p)?k(c,p,y(l,p)):re(p,y(c,p))}else{if(Te&&S(r))for(const g of d.mount){const p=y(i,g);if(p&&p._f){const j=Array.isArray(p._f.refs)?p._f.refs[0]:p._f.ref;if(De(j)){const O=j.closest("form");if(O){O.reset();break}}}}for(const g of d.mount)re(g,y(c,g))}l=N(c),x.array.next({values:{...c}}),x.state.next({values:{...c}})}d={mount:n.keepDirtyValues?d.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},u.mount=!v.isValid||!!n.keepIsValid||!!n.keepDirtyValues,u.watch=!!s.shouldUnregister,x.state.next({submitCount:n.keepSubmitCount?t.submitCount:0,isDirty:f?!1:n.keepDirty?t.isDirty:!!(n.keepDefaultValues&&!ie(r,a)),isSubmitted:n.keepIsSubmitted?t.isSubmitted:!1,dirtyFields:f?{}:n.keepDirtyValues?n.keepDefaultValues&&l?he(a,l):t.dirtyFields:n.keepDefaultValues&&r?he(a,r):n.keepDirty?t.dirtyFields:{},touchedFields:n.keepTouched?t.touchedFields:{},errors:n.keepErrors?t.errors:{},isSubmitSuccessful:n.keepIsSubmitSuccessful?t.isSubmitSuccessful:!1,isSubmitting:!1})},Qe=(r,n)=>Je(z(r)?r(l):r,n),Rt=(r,n={})=>{const o=y(i,r),h=o&&o._f;if(h){const f=h.refs?h.refs[0]:h.ref;f.focus&&(f.focus(),n.shouldSelect&&z(f.select)&&f.select())}},Nt=r=>{t={...t,...r}},Xe={control:{register:Ee,unregister:Se,getFieldState:qe,handleSubmit:Ke,setError:We,_subscribe:Ge,_runSchema:K,_getWatch:C,_getDirty:V,_setValid:L,_setFieldArray:G,_setDisabledField:He,_setErrors:I,_getFieldArray:P,_reset:Je,_resetDefaultValues:()=>z(s.defaultValues)&&s.defaultValues().then(r=>{Qe(r,s.resetOptions),x.state.next({isLoading:!1})}),_removeUnmounted:w,_disableForm:Mt,_subjects:x,_proxyFormState:v,get _fields(){return i},get _formValues(){return l},get _state(){return u},set _state(r){u=r},get _defaultValues(){return a},get _names(){return d},set _names(r){d=r},get _formState(){return t},get _options(){return s},set _options(r){s={...s,...r}}},subscribe:jt,trigger:Ce,register:Ee,handleSubmit:Ke,watch:Et,setValue:re,getValues:Ye,reset:Qe,resetField:It,clearErrors:St,unregister:Se,setError:We,setFocus:Rt,getFieldState:qe};return{...Xe,formControl:Xe}}function as(e={}){const s=D.useRef(void 0),t=D.useRef(void 0),[i,a]=D.useState({isDirty:!1,isValidating:!1,isLoading:z(e.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1,defaultValues:z(e.defaultValues)?void 0:e.defaultValues});s.current||(s.current={...e.formControl?e.formControl:ns(e),formState:i},e.formControl&&e.defaultValues&&!z(e.defaultValues)&&e.formControl.reset(e.defaultValues,e.resetOptions));const l=s.current.control;return l._options=e,D.useLayoutEffect(()=>l._subscribe({formState:l._proxyFormState,callback:()=>a({...l._formState}),reRenderRoot:!0}),[l]),D.useEffect(()=>l._disableForm(e.disabled),[l,e.disabled]),D.useEffect(()=>{if(l._proxyFormState.isDirty){const u=l._getDirty();u!==i.isDirty&&l._subjects.state.next({isDirty:u})}},[l,i.isDirty]),D.useEffect(()=>{e.values&&!ie(e.values,t.current)?(l._reset(e.values,l._options.resetOptions),t.current=e.values,a(u=>({...u}))):l._resetDefaultValues()},[e.values,l]),D.useEffect(()=>{e.errors&&!B(e.errors)&&l._setErrors(e.errors)},[e.errors,l]),D.useEffect(()=>{l._state.mount||(l._setValid(),l._state.mount=!0),l._state.watch&&(l._state.watch=!1,l._subjects.state.next({...l._formState})),l._removeUnmounted()}),D.useEffect(()=>{e.shouldUnregister&&l._subjects.state.next({values:l._getWatch()})},[e.shouldUnregister,l]),s.current.formState=xt(i,l),s.current}const ls="_Input_qxj6w_1",os="_name_qxj6w_10",us="_input_qxj6w_14",se={Input:ls,name:os,input:us},cs="_input_dtdqj_1",ds={input:cs},fs=({name:e,control:s,rules:t,label:i,type:a="text",placeholder:l="",autoFocus:u})=>{const{field:{onChange:d,onBlur:m,value:A,ref:v},fieldState:{error:F}}=Ue({name:e,control:s,rules:t});return _.jsxs("label",{className:se.Input,children:[_.jsxs("div",{className:se.name,children:[_.jsx("span",{children:i}),_.jsx("span",{children:(F==null?void 0:F.message)&&` (${F.message})`})]}),_.jsx("input",{className:Oe(se.input,ds.input),onChange:d,onBlur:m,value:A??"",name:e,ref:v,type:a,placeholder:l,autoFocus:u})]})},ys="_textarea_c6s61_1",hs={textarea:ys},gs=({name:e,control:s,rules:t,label:i,placeholder:a="",autoFocus:l})=>{const{field:{onChange:u,onBlur:d,value:m,ref:A},fieldState:{error:v}}=Ue({name:e,control:s,rules:t});return _.jsxs("label",{className:se.Input,children:[_.jsxs("div",{className:se.name,children:[_.jsx("span",{children:i}),_.jsx("span",{children:(v==null?void 0:v.message)&&` (${v.message})`})]}),_.jsx("textarea",{className:Oe(se.input,hs.textarea),onChange:u,onBlur:d,value:m??"",name:e,ref:A,placeholder:a,autoFocus:l})]})},Ct=ee.createContext(null),_s=({children:e,...s})=>{const[t,i]=ee.useState(!1),a=ee.useRef(null),l=ee.useRef(null),u=()=>{i(!0)},d=()=>{i(!1)},m=()=>{i(v=>!v)},A=()=>{if(!a.current||!l.current)return;const v=a.current.getBoundingClientRect(),F=l.current.getBoundingClientRect();l.current.style.left=`${v.left}px`,l.current.style.width=`${v.width}px`,window.innerHeight-v.bottom>F.height?l.current.style.top=`${v.bottom}px`:l.current.style.top=`${v.top-F.height}px`};return ee.useEffect(()=>{A()},[t]),ee.useEffect(()=>(A(),window.addEventListener("resize",A),()=>window.removeEventListener("resize",A)),[]),_.jsx(Ct.Provider,{value:{isOpen:t,open:u,close:d,toggle:m,inputGroupRef:a,calendarRef:l,updatePosition:A,...s},children:e})},ce=()=>ee.useContext(Ct),ms="_InputGroup_lzral_1",vs="_input_lzral_6",yt={InputGroup:ms,input:vs},bs=()=>{const{onChange:e,onBlur:s,value:t,name:i,ref:a,autoFocus:l,toggle:u,inputGroupRef:d}=ce();return _.jsxs("div",{className:yt.InputGroup,ref:d,children:[_.jsx("input",{className:Oe(se.input,yt.input),onChange:e,onBlur:s,value:t,name:i,ref:a,type:"date",autoFocus:l,onClick:m=>m.preventDefault()}),_.jsx(ne,{onClick:u,tabIndex:"-1",children:"К"})]})},xs="_Controls_1wum6_1",Vs="_text_1wum6_7",ht={Controls:xs,text:Vs},Fs=()=>{const{value:e,onChange:s,close:t}=ce(),i=ee.useMemo(()=>te(e).get("month"),[e]),a=ee.useMemo(()=>te(e).get("year"),[e]),l=["Январь","Февраль","Март","Апрель","Май","Июнь","Июль","Август","Сентябрь","Октябрь","Ноябрь","Декабрь"],u=()=>{s(te(e).add(1,"month").format("YYYY-MM-DD"))},d=()=>{s(te(e).add(-1,"month").format("YYYY-MM-DD"))},m=()=>{s(te().format("YYYY-MM-DD"))};return _.jsxs("div",{className:ht.Controls,children:[_.jsx(ne,{onClick:d,tabIndex:"-1",children:"<"}),_.jsxs("div",{className:ht.text,children:[l[i]," ",a," г."]}),_.jsx(ne,{onClick:u,tabIndex:"-1",children:">"}),_.jsx(ne,{onClick:m,tabIndex:"-1",children:"Сбр"}),_.jsx(ne,{onClick:t,tabIndex:"-1",children:"Ок"})]})},Ds="_Days_a7794_1",ps={Days:Ds},As="_weekday_edj1s_1",ws={weekday:As},ks=()=>_.jsx(_.Fragment,{children:["ПН","ВТ","СР","ЧТ","ПТ","СБ","ВС"].map((e,s)=>_.jsx("div",{className:ws.weekday,children:e},s))}),Cs=()=>{const{value:e}=ce(),s=te(e).startOf("month"),t=s.day()===0?6:s.day()-1;return _.jsx(_.Fragment,{children:Array.from({length:t}).map((i,a)=>_.jsx("div",{},a))})},Ss="_button_u8rqi_1",Es={button:Ss},js=()=>{const{value:e,onChange:s}=ce(),t=te(e),i=t.date(),l=t.startOf("month").daysInMonth(),u=d=>{s(te(e).date(d).format("YYYY-MM-DD"))};return _.jsx(_.Fragment,{children:Array.from({length:l}).map((d,m)=>_.jsx(ne,{className:Es.button,disabled:m+1===i,onClick:()=>u(m+1),tabIndex:"-1",children:m+1},m))})},Ms=()=>_.jsxs("div",{className:ps.Days,children:[_.jsx(ks,{}),_.jsx(Cs,{}),_.jsx(js,{})]}),Is=({children:e})=>{const s=document.getElementById("portal");return Ut.createPortal(e,s)},Rs="_Calendar_15cdp_1",Ns="_inner_15cdp_12",Os="_hider_15cdp_47",Ts="_padding_15cdp_51",xe={Calendar:Rs,inner:Ns,hider:Os,padding:Ts},Ls=()=>{const{isOpen:e,close:s,calendarRef:t}=ce();return Bt(s,e),_.jsx(Is,{children:_.jsx("div",{className:xe.Calendar,inert:!e,onClick:s,children:_.jsx("div",{className:xe.inner,ref:t,onClick:i=>i.stopPropagation(),children:_.jsx("div",{className:xe.hider,children:_.jsxs("div",{className:xe.padding,children:[_.jsx(Fs,{}),_.jsx(Ms,{})]})})})})})},Bs=()=>{const{label:e,error:s}=ce();return _.jsxs("div",{className:se.name,children:[_.jsx("span",{children:e}),_.jsx("span",{children:(s==null?void 0:s.message)&&` (${s.message})`})]})},gt=({name:e,control:s,rules:t,label:i,autoFocus:a})=>{const{field:{onChange:l,onBlur:u,value:d,ref:m},fieldState:{error:A}}=Ue({name:e,control:s,rules:t,defaultValue:te().format("YYYY-MM-DD")});return _.jsx(_s,{label:i,autoFocus:a,onChange:l,onBlur:u,value:d,ref:m,error:A,children:_.jsxs("label",{className:se.Input,children:[_.jsx(Bs,{}),_.jsx(bs,{}),_.jsx(Ls,{})]})})},Ys=()=>{const e=Ie(d=>d.isModalOpen),s=Ie(d=>d.closeModal),t=Ie(d=>d.addTask),{control:i,formState:{isValid:a},handleSubmit:l}=as({mode:"onChange",defaultValues:{name:""}}),u=d=>{s(),t(d)};return _.jsx(_.Fragment,{children:_.jsxs("form",{onSubmit:l(u),children:[_.jsxs("div",{className:tt.scroller,children:[_.jsx(fs,{name:"name",label:"Название",rules:{required:"обязательное"},autoFocus:e,control:i}),_.jsx(gs,{name:"desc",label:"Описание",control:i}),_.jsx(gt,{name:"start",label:"Начало",control:i}),_.jsx(gt,{name:"end",label:"Конец",control:i})]}),_.jsxs("div",{className:tt.actions,children:[_.jsx(ne,{visualDisabled:!a,type:"submit",children:"Добавить"}),_.jsx(ne,{onClick:s,secondary:!0,children:"Отмена"})]})]})})};export{Ys as default};
