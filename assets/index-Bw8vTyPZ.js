import{j as e,T as v,G as x,I as j,L as o,M as k,B as E,r as u,u as q}from"./index-eSfjGE2T.js";import{C as y}from"./Collapser-BphwnIr9.js";import{a as G,b as _,M as V,P as $,A as D,u as W,H as A}from"./trashcan-DLYYplHF.js";import{A as F}from"./AreaInput-DDSyGWRK.js";import{S as P}from"./Switch-Csm5HanN.js";import{R as B}from"./Radio-vtHkKggU.js";const X={},H="_inner_1ualu_1",z="_storeButton_1ualu_5",U="_importIcon_1ualu_9",J="_exportIcon_1ualu_13",K="_gap_1ualu_17",i={inner:H,storeButton:z,importIcon:U,exportIcon:J,gap:K},O=()=>{const t=G(),{control:s,getValues:a,setValue:r}=_(),n=()=>o.import(a("store")),l=()=>{const c=o.export();r("store",c),navigator.clipboard.writeText(c)};return e.jsxs(e.Fragment,{children:[e.jsx(v,{indent:!0,children:"Хранилище"}),e.jsx(F,{label:"Импорт и экспорт",placeholder:"Ваши данные...",name:"store",control:s}),e.jsxs(x,{className:i.gap,children:[e.jsx(j,{className:i.storeButton,cs:{icon:i.importIcon},icon:k,label:"Импорт",onClick:n}),e.jsx(j,{className:i.storeButton,cs:{icon:i.exportIcon},icon:k,label:"Экспорт",onClick:l}),e.jsx(j,{className:i.storeButton,cs:{inner:i.inner},icon:V,label:"Сброс",onClick:t.open})]}),e.jsx($,{controls:t,maxWidth:450,children:e.jsxs(x,{column:!0,children:[e.jsx(v,{children:"Сброс"}),e.jsx("p",{children:"Вы уверены, что хотите полностью очистить хранилище? Это действие невозможно отменить!"}),e.jsxs(D,{children:[e.jsx(E,{cs:{inner:i.inner},onClick:()=>{o.reset(),t.close()},children:"Подтвердить"}),e.jsx(E,{onClick:t.close,children:"Отменить сброс"})]})]})})]})},Q=()=>{const t=o.enableTaskRemoveConfirmation,s=o.disableTaskRemoveConfirmation,{control:a,watch:r}=_({mode:"onChange",defaultValues:{tasksRemoveConfirmation:o.getTaskRemoveConfirmation()}}),n=r("tasksRemoveConfirmation");return u.useEffect(()=>{n?t():s()},[s,t,n]),e.jsxs(e.Fragment,{children:[e.jsx(v,{children:"Задачи"}),e.jsx(P,{name:"tasksRemoveConfirmation",label:"Подтверждение удаления задачи",control:a})]})},Y=(t,s,a)=>(clearTimeout(t),setTimeout(s,a)),Z="_input_qw02o_1",ee="_line_qw02o_12",te="_linePadding_qw02o_19",oe="_selectorPosition_qw02o_25",se="_selectorWrapper_qw02o_35",ne="_selector_qw02o_25",m={input:Z,line:ee,linePadding:te,selectorPosition:oe,selectorWrapper:se,selector:ne},M=t=>t<0?0:t>100?100:t,ae=({label:t,name:s,placeholder:a,rules:r,control:n,autoFocus:l})=>{const{field:{onChange:c,onBlur:S,value:C,ref:I},fieldState:{error:N}}=W({name:s,rules:r,control:n}),b=u.useRef(null),w=d=>{const p=d.target,f=Number(p.value.replace(/\D/,""));c(M(f))},R=d=>{d.preventDefault();const p=d.type==="touchstart",f=b.current.getBoundingClientRect(),h=T=>{const L=((p?T.touches[0].clientX:T.clientX)-f.left)/f.width*100;c(M(Math.round(L)))};h(d);const g=()=>{p?(document.removeEventListener("touchmove",h),document.removeEventListener("touchend",g)):(document.removeEventListener("mousemove",h),document.removeEventListener("mouseup",g))};p?(document.addEventListener("touchmove",h),document.addEventListener("touchend",g)):(document.addEventListener("mousemove",h),document.addEventListener("mouseup",g))};return e.jsxs("label",{children:[e.jsx(A,{label:t,error:N}),e.jsxs(x,{children:[e.jsx("div",{className:m.line,onMouseDown:R,onTouchStart:R,children:e.jsx("div",{className:m.linePadding,ref:b,children:e.jsx("div",{className:m.selectorPosition,style:{left:`${C}%`},children:e.jsx("div",{className:m.selectorWrapper,children:e.jsx("div",{className:m.selector})})})})}),e.jsx("input",{className:m.input,onChange:w,onBlur:S,value:C??"",ref:I,placeholder:a,type:"text",autoFocus:l})]})]})},re="_gap_1oqve_1",le={gap:re},ce=()=>{const{control:t,watch:s}=_({mode:"onChange",defaultValues:{themeMainColor:o.getThemeMainColor(),borderRadius:o.getBorderRadius(),theme:o.getTheme(),gap:o.getGap()}}),a=s("themeMainColor"),r=s("borderRadius"),n=s("theme"),l=s("gap");let c=u.useRef(null);return u.useEffect(()=>{c.current=Y(c.current,()=>o.setThemeMainColor(a),200)},[a]),u.useEffect(()=>{r?o.enableBorderRadius():o.disableBorderRadius()},[r]),u.useEffect(()=>{n==="system"?o.clearTheme():n==="light"?o.setLightTheme():n==="dark"&&o.setDarkTheme()},[n]),u.useEffect(()=>{l==="small"?o.setSmallGap():l==="big"?o.setBigGap():l==="standard"&&o.setStandardGap()},[l]),e.jsxs(e.Fragment,{children:[e.jsx(v,{indent:!0,children:"Визуальное оформление"}),e.jsx(ae,{name:"themeMainColor",label:"Основной цвет",control:t}),e.jsx(P,{name:"borderRadius",label:"Скругления углов",control:t}),e.jsxs(x,{className:le.gap,children:[e.jsx(B,{name:"theme",label:"Тема",options:[{value:"light",label:"Светлая"},{value:"dark",label:"Темная"},{value:"system",label:"Как в системе"}],control:t}),e.jsx(B,{name:"gap",label:"Отступы",options:[{value:"small",label:"Маленькие"},{value:"standard",label:"Стандартные"},{value:"big",label:"Большие"}],control:t})]})]})},fe=()=>{const t=q(s=>s.setCurrentPageTitle);return u.useLayoutEffect(()=>t("Настройки")),e.jsx(y,{children:e.jsxs(x,{column:!0,className:X.Settings,children:[e.jsx(Q,{}),e.jsx(ce,{}),e.jsx(O,{})]})})};export{fe as Settings};
