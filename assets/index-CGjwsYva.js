import{j as e,T as C,G as f,I as T,L as n,M,B as E,r as u,b as I,u as D}from"./index-D-3Cilet.js";import{C as W}from"./Collapser-B9clrnaS.js";import{b as y,u as S,A as z,M as F,P as X,a as A,S as $,c as w,H as G}from"./Switch-6QKIb8fL.js";const O={},H="_inner_1ualu_1",J="_storeButton_1ualu_5",q="_importIcon_1ualu_9",U="_exportIcon_1ualu_13",K="_gap_1ualu_17",m={inner:H,storeButton:J,importIcon:q,exportIcon:U,gap:K},Q=()=>{const s=y(),{control:r,getValues:c,setValue:t}=S(),a=()=>n.import(c("store")),o=()=>{const l=n.export();t("store",l),navigator.clipboard.writeText(l)};return e.jsxs(e.Fragment,{children:[e.jsx(C,{indent:!0,children:"Хранилище"}),e.jsx(z,{label:"Импорт и экспорт",placeholder:"Ваши данные...",name:"store",control:r}),e.jsxs(f,{className:m.gap,children:[e.jsx(T,{className:m.storeButton,cs:{icon:m.importIcon},icon:M,label:"Импорт",onClick:a}),e.jsx(T,{className:m.storeButton,cs:{icon:m.exportIcon},icon:M,label:"Экспорт",onClick:o}),e.jsx(T,{className:m.storeButton,cs:{inner:m.inner},icon:F,label:"Сброс",onClick:s.open})]}),e.jsx(X,{controls:s,maxWidth:450,children:e.jsxs(f,{column:!0,children:[e.jsx(C,{children:"Сброс"}),e.jsx("p",{children:"Вы уверены, что хотите полностью очистить хранилище? Это действие невозможно отменить!"}),e.jsxs(A,{children:[e.jsx(E,{cs:{inner:m.inner},onClick:()=>{n.reset(),s.close()},children:"Подтвердить"}),e.jsx(E,{onClick:s.close,children:"Отменить сброс"})]})]})})]})},Y=()=>{const s=n.enableTaskRemoveConfirmation,r=n.disableTaskRemoveConfirmation,{control:c,watch:t}=S({mode:"onChange",defaultValues:{tasksRemoveConfirmation:n.getTaskRemoveConfirmation()}}),a=t("tasksRemoveConfirmation");return u.useEffect(()=>{a?s():r()},[r,s,a]),e.jsxs(e.Fragment,{children:[e.jsx(C,{children:"Задачи"}),e.jsx($,{name:"tasksRemoveConfirmation",label:"Подтверждение удаления задачи",control:c})]})},Z=(s,r,c)=>(clearTimeout(s),setTimeout(r,c)),ee="_input_16urk_1",te="_line_16urk_12",se="_selectorPosition_16urk_20",ne="_selectorWrapper_16urk_30",re="_selector_16urk_20",j={input:ee,line:te,selectorPosition:se,selectorWrapper:ne,selector:re},L=s=>s<0?0:s>100?100:s,ae=({label:s,name:r,placeholder:c,rules:t,control:a,autoFocus:o})=>{const{field:{onChange:l,onBlur:b,value:x,ref:k},fieldState:{error:i}}=w({name:r,rules:t,control:a}),d=h=>{const v=h.target,_=Number(v.value.replace(/\D/,""));l(L(_))},B=h=>{h.preventDefault();const v=h.type==="touchstart",_=h.currentTarget.getBoundingClientRect(),g=N=>{const V=((v?N.touches[0].clientX:N.clientX)-_.left)/_.width*100;l(L(Math.round(V)))};g(h);const p=()=>{v?(document.removeEventListener("touchmove",g),document.removeEventListener("touchend",p)):(document.removeEventListener("mousemove",g),document.removeEventListener("mouseup",p))};v?(document.addEventListener("touchmove",g),document.addEventListener("touchend",p)):(document.addEventListener("mousemove",g),document.addEventListener("mouseup",p))};return e.jsxs("label",{children:[e.jsx(G,{label:s,error:i}),e.jsxs(f,{children:[e.jsx("div",{className:j.line,onMouseDown:B,onTouchStart:B,children:e.jsx("div",{className:j.selectorPosition,style:{left:`${x}%`},children:e.jsx("div",{className:j.selectorWrapper,children:e.jsx("div",{className:j.selector})})})}),e.jsx("input",{className:j.input,onChange:d,onBlur:b,value:x??"",ref:k,placeholder:c,type:"text",autoFocus:o})]})]})},oe="_inner_18z5c_1",ce="_circle_18z5c_9",le="_chosen_18z5c_27",R={inner:oe,circle:ce,chosen:le},P=u.memo(({label:s,name:r,rules:c,options:t=[],control:a})=>{const{field:{onChange:o,value:l},fieldState:{error:b}}=w({name:r,rules:c,control:a}),x=u.useRef(t);u.useEffect(()=>{var i;o((i=(t==null?void 0:t.find(d=>d.value===l))??(t==null?void 0:t.find(d=>d.default))??(t==null?void 0:t[0]))==null?void 0:i.value)},[]),u.useEffect(()=>{var i;JSON.stringify(x.current)!==JSON.stringify(t)&&(x.current=t,o((i=(t==null?void 0:t.find(d=>d.default))??(t==null?void 0:t[0]))==null?void 0:i.value))},[o,t,l]);const k=y();return e.jsxs("div",{children:[e.jsx(G,{label:s,error:b}),e.jsx(f,{column:!0,children:t&&t.map(i=>e.jsxs(E,{cs:{inner:I(R.inner)},onClick:()=>{o(i.value),k.close()},children:[e.jsx("div",{className:I(R.circle,l===i.value&&R.chosen)}),i.label]},i.value))})]})}),ie="_gap_1oqve_1",ue={gap:ie},me=()=>{const{control:s,watch:r}=S({mode:"onChange",defaultValues:{themeMainColor:n.getThemeMainColor(),borderRadius:n.getBorderRadius(),theme:n.getTheme(),gap:n.getGap()}}),c=r("themeMainColor"),t=r("borderRadius"),a=r("theme"),o=r("gap");let l=u.useRef(null);return u.useEffect(()=>{l.current=Z(l.current,()=>n.setThemeMainColor(c),200)},[c]),u.useEffect(()=>{t?n.enableBorderRadius():n.disableBorderRadius()},[t]),u.useEffect(()=>{a==="system"?n.clearTheme():a==="light"?n.setLightTheme():a==="dark"&&n.setDarkTheme()},[a]),u.useEffect(()=>{o==="small"?n.setSmallGap():o==="big"?n.setBigGap():o==="standard"&&n.setStandardGap()},[o]),e.jsxs(e.Fragment,{children:[e.jsx(C,{indent:!0,children:"Визуальное оформление"}),e.jsx(ae,{name:"themeMainColor",label:"Основной цвет",control:s}),e.jsx($,{name:"borderRadius",label:"Скругления углов",control:s}),e.jsxs(f,{className:ue.gap,children:[e.jsx(P,{name:"theme",label:"Тема",options:[{value:"light",label:"Светлая"},{value:"dark",label:"Темная"},{value:"system",label:"Как в системе"}],control:s}),e.jsx(P,{name:"gap",label:"Отступы",options:[{value:"small",label:"Маленькие"},{value:"standard",label:"Стандартные"},{value:"big",label:"Большие"}],control:s})]})]})},ve=()=>{const s=D(r=>r.setCurrentPageTitle);return u.useLayoutEffect(()=>s("Настройки")),e.jsx(W,{children:e.jsxs(f,{column:!0,className:O.Settings,children:[e.jsx(Y,{}),e.jsx(me,{}),e.jsx(Q,{})]})})};export{ve as Settings};
