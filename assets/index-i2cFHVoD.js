import{j as e,T as v,G as x,I as j,L as o,M as T,B as R,r as u,u as w}from"./index-D68tMSrt.js";import{C as y}from"./Collapser-DBVt63r7.js";import{a as G,b as C,M as V,P as $,A as D,u as W,H as A}from"./trashcan-BXc3dtg8.js";import{A as F}from"./AreaInput-DGzlStts.js";import{S as M}from"./Switch-CXme8S5W.js";import{R as E}from"./Radio-DKs4op4z.js";const X={},H="_inner_1ualu_1",q="_storeButton_1ualu_5",z="_importIcon_1ualu_9",U="_exportIcon_1ualu_13",J="_gap_1ualu_17",i={inner:H,storeButton:q,importIcon:z,exportIcon:U,gap:J},K=()=>{const t=G(),{control:s,getValues:r,setValue:a}=C(),n=()=>o.import(r("store")),l=()=>{const c=o.export();a("store",c),navigator.clipboard.writeText(c)};return e.jsxs(e.Fragment,{children:[e.jsx(v,{indent:!0,children:"Хранилище"}),e.jsx(F,{label:"Импорт и экспорт",placeholder:"Ваши данные...",name:"store",control:s}),e.jsxs(x,{className:i.gap,children:[e.jsx(j,{className:i.storeButton,cs:{icon:i.importIcon},icon:T,label:"Импорт",onClick:n}),e.jsx(j,{className:i.storeButton,cs:{icon:i.exportIcon},icon:T,label:"Экспорт",onClick:l}),e.jsx(j,{className:i.storeButton,cs:{inner:i.inner},icon:V,label:"Сброс",onClick:t.open})]}),e.jsx($,{controls:t,maxWidth:450,children:e.jsxs(x,{column:!0,children:[e.jsx(v,{children:"Сброс"}),e.jsx("p",{children:"Вы уверены, что хотите полностью очистить хранилище? Это действие невозможно отменить!"}),e.jsxs(D,{children:[e.jsx(R,{cs:{inner:i.inner},onClick:()=>{o.reset(),t.close()},children:"Подтвердить"}),e.jsx(R,{onClick:t.close,children:"Отменить сброс"})]})]})})]})},O=()=>{const t=o.enableTaskRemoveConfirmation,s=o.disableTaskRemoveConfirmation,{control:r,watch:a}=C({mode:"onChange",defaultValues:{tasksRemoveConfirmation:o.getTaskRemoveConfirmation()}}),n=a("tasksRemoveConfirmation");return u.useEffect(()=>{n?t():s()},[s,t,n]),e.jsxs(e.Fragment,{children:[e.jsx(v,{children:"Задачи"}),e.jsx(M,{name:"tasksRemoveConfirmation",label:"Подтверждение удаления задачи",control:r})]})},Q=(t,s,r)=>(clearTimeout(t),setTimeout(s,r)),Y="_input_16urk_1",Z="_line_16urk_12",ee="_selectorPosition_16urk_20",te="_selectorWrapper_16urk_30",oe="_selector_16urk_20",h={input:Y,line:Z,selectorPosition:ee,selectorWrapper:te,selector:oe},B=t=>t<0?0:t>100?100:t,se=({label:t,name:s,placeholder:r,rules:a,control:n,autoFocus:l})=>{const{field:{onChange:c,onBlur:S,value:b,ref:I},fieldState:{error:L}}=W({name:s,rules:a,control:n}),N=m=>{const d=m.target,f=Number(d.value.replace(/\D/,""));c(B(f))},_=m=>{m.preventDefault();const d=m.type==="touchstart",f=m.currentTarget.getBoundingClientRect(),p=k=>{const P=((d?k.touches[0].clientX:k.clientX)-f.left)/f.width*100;c(B(Math.round(P)))};p(m);const g=()=>{d?(document.removeEventListener("touchmove",p),document.removeEventListener("touchend",g)):(document.removeEventListener("mousemove",p),document.removeEventListener("mouseup",g))};d?(document.addEventListener("touchmove",p),document.addEventListener("touchend",g)):(document.addEventListener("mousemove",p),document.addEventListener("mouseup",g))};return e.jsxs("label",{children:[e.jsx(A,{label:t,error:L}),e.jsxs(x,{children:[e.jsx("div",{className:h.line,onMouseDown:_,onTouchStart:_,children:e.jsx("div",{className:h.selectorPosition,style:{left:`${b}%`},children:e.jsx("div",{className:h.selectorWrapper,children:e.jsx("div",{className:h.selector})})})}),e.jsx("input",{className:h.input,onChange:N,onBlur:S,value:b??"",ref:I,placeholder:r,type:"text",autoFocus:l})]})]})},ne="_gap_1oqve_1",re={gap:ne},ae=()=>{const{control:t,watch:s}=C({mode:"onChange",defaultValues:{themeMainColor:o.getThemeMainColor(),borderRadius:o.getBorderRadius(),theme:o.getTheme(),gap:o.getGap()}}),r=s("themeMainColor"),a=s("borderRadius"),n=s("theme"),l=s("gap");let c=u.useRef(null);return u.useEffect(()=>{c.current=Q(c.current,()=>o.setThemeMainColor(r),200)},[r]),u.useEffect(()=>{a?o.enableBorderRadius():o.disableBorderRadius()},[a]),u.useEffect(()=>{n==="system"?o.clearTheme():n==="light"?o.setLightTheme():n==="dark"&&o.setDarkTheme()},[n]),u.useEffect(()=>{l==="small"?o.setSmallGap():l==="big"?o.setBigGap():l==="standard"&&o.setStandardGap()},[l]),e.jsxs(e.Fragment,{children:[e.jsx(v,{indent:!0,children:"Визуальное оформление"}),e.jsx(se,{name:"themeMainColor",label:"Основной цвет",control:t}),e.jsx(M,{name:"borderRadius",label:"Скругления углов",control:t}),e.jsxs(x,{className:re.gap,children:[e.jsx(E,{name:"theme",label:"Тема",options:[{value:"light",label:"Светлая"},{value:"dark",label:"Темная"},{value:"system",label:"Как в системе"}],control:t}),e.jsx(E,{name:"gap",label:"Отступы",options:[{value:"small",label:"Маленькие"},{value:"standard",label:"Стандартные"},{value:"big",label:"Большие"}],control:t})]})]})},he=()=>{const t=w(s=>s.setCurrentPageTitle);return u.useLayoutEffect(()=>t("Настройки")),e.jsx(y,{children:e.jsxs(x,{column:!0,className:X.Settings,children:[e.jsx(O,{}),e.jsx(ae,{}),e.jsx(K,{})]})})};export{he as Settings};
