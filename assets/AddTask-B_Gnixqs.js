import{u as o,f as b,g as a,r as M,j as s,m as d,B as i}from"./index-8MgR8TBQ.js";import{T as Y}from"./calendar-B-PNqM_L.js";import{A as D}from"./AreaInput-C8P7-oB-.js";import{D as m,i as S,a as A}from"./isSameOrAfter-B3sj8mfU.js";a.extend(S);a.extend(A);const g=()=>{const c=o(e=>e.isModalOpen),n=o(e=>e.closeModal),u=o(e=>e.addTask),{control:t,formState:{isValid:f,errors:T},handleSubmit:x,watch:l,setValue:j}=b({mode:"onChange",defaultValues:{start:a().format("YYYY-MM-DD"),end:a().format("YYYY-MM-DD")}}),p=e=>{n(),u(e)},r=l("start"),h=l("end");return M.useEffect(()=>{a(h).isBefore(r)&&j("end",r)},[r]),s.jsx(s.Fragment,{children:s.jsxs("form",{onSubmit:x(p),children:[s.jsxs("div",{className:d.scroller,children:[s.jsx(Y,{name:"name",label:"Название",rules:{required:"обязательное"},autoFocus:c,control:t}),s.jsx(D,{name:"desc",label:"Описание",control:t}),s.jsx(m,{name:"start",label:"Начало",control:t}),s.jsx(m,{name:"end",label:"Конец",rules:{validate:e=>a(e).isSameOrAfter(r)||"не может быть раньше начала"},control:t})]}),s.jsxs("div",{className:d.actions,children:[s.jsx(i,{visualDisabled:!f,type:"submit",children:"Добавить"}),s.jsx(i,{onClick:n,secondary:!0,children:"Отмена"})]})]})})};export{g as default};
