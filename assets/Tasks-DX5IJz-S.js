const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/RemoveTask-CTGEGkbw.js","assets/index-B3hIxIdI.js","assets/index-DrZTzJ2m.css","assets/AddTask-DKVwMxyC.js","assets/AddTask-Dv99FnBy.css"])))=>i.map(i=>d[i]);
import{g as $t,a as Ot,u as J,j as g,B as at,r as _,_ as _t,c as kt,R as j}from"./index-B3hIxIdI.js";var Ct=Ot();const K=$t(Ct),jt="_Task_1gt1v_1",Nt="_info_1gt1v_13",wt="_name_1gt1v_19",Rt="_actions_1gt1v_22",tt={Task:jt,info:Nt,name:wt,actions:Rt};var et={exports:{}},Pt=et.exports,pt;function Yt(){return pt||(pt=1,function(s,c){(function(u,o){s.exports=o()})(Pt,function(){var u=1e3,o=6e4,e=36e5,t="millisecond",n="second",l="minute",h="hour",v="day",T="week",D="month",F="quarter",k="year",C="date",A="Invalid Date",yt=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,Dt=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,St={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(d){var a=["th","st","nd","rd"],r=d%100;return"["+d+(a[(r-20)%10]||a[r]||a[0])+"]"}},rt=function(d,a,r){var f=String(d);return!f||f.length>=a?d:""+Array(a+1-f.length).join(r)+d},bt={s:rt,z:function(d){var a=-d.utcOffset(),r=Math.abs(a),f=Math.floor(r/60),i=r%60;return(a<=0?"+":"-")+rt(f,2,"0")+":"+rt(i,2,"0")},m:function d(a,r){if(a.date()<r.date())return-d(r,a);var f=12*(r.year()-a.year())+(r.month()-a.month()),i=a.clone().add(f,D),p=r-i<0,m=a.clone().add(f+(p?-1:1),D);return+(-(f+(r-i)/(p?i-m:m-i))||0)},a:function(d){return d<0?Math.ceil(d)||0:Math.floor(d)},p:function(d){return{M:D,y:k,w:T,d:v,D:C,h,m:l,s:n,ms:t,Q:F}[d]||String(d||"").toLowerCase().replace(/s$/,"")},u:function(d){return d===void 0}},G="en",R={};R[G]=St;var dt="$isDayjsObject",it=function(d){return d instanceof Z||!(!d||!d[dt])},X=function d(a,r,f){var i;if(!a)return G;if(typeof a=="string"){var p=a.toLowerCase();R[p]&&(i=p),r&&(R[p]=r,i=p);var m=a.split("-");if(!i&&m.length>1)return d(m[0])}else{var E=a.name;R[E]=a,i=E}return!f&&i&&(G=i),i||!f&&G},M=function(d,a){if(it(d))return d.clone();var r=typeof a=="object"?a:{};return r.date=d,r.args=arguments,new Z(r)},x=bt;x.l=X,x.i=it,x.w=function(d,a){return M(d,{locale:a.$L,utc:a.$u,x:a.$x,$offset:a.$offset})};var Z=function(){function d(r){this.$L=X(r.locale,null,!0),this.parse(r),this.$x=this.$x||r.x||{},this[dt]=!0}var a=d.prototype;return a.parse=function(r){this.$d=function(f){var i=f.date,p=f.utc;if(i===null)return new Date(NaN);if(x.u(i))return new Date;if(i instanceof Date)return new Date(i);if(typeof i=="string"&&!/Z$/i.test(i)){var m=i.match(yt);if(m){var E=m[2]-1||0,$=(m[7]||"0").substring(0,3);return p?new Date(Date.UTC(m[1],E,m[3]||1,m[4]||0,m[5]||0,m[6]||0,$)):new Date(m[1],E,m[3]||1,m[4]||0,m[5]||0,m[6]||0,$)}}return new Date(i)}(r),this.init()},a.init=function(){var r=this.$d;this.$y=r.getFullYear(),this.$M=r.getMonth(),this.$D=r.getDate(),this.$W=r.getDay(),this.$H=r.getHours(),this.$m=r.getMinutes(),this.$s=r.getSeconds(),this.$ms=r.getMilliseconds()},a.$utils=function(){return x},a.isValid=function(){return this.$d.toString()!==A},a.isSame=function(r,f){var i=M(r);return this.startOf(f)<=i&&i<=this.endOf(f)},a.isAfter=function(r,f){return M(r)<this.startOf(f)},a.isBefore=function(r,f){return this.endOf(f)<M(r)},a.$g=function(r,f,i){return x.u(r)?this[f]:this.set(i,r)},a.unix=function(){return Math.floor(this.valueOf()/1e3)},a.valueOf=function(){return this.$d.getTime()},a.startOf=function(r,f){var i=this,p=!!x.u(f)||f,m=x.p(r),E=function(Y,b){var w=x.w(i.$u?Date.UTC(i.$y,b,Y):new Date(i.$y,b,Y),i);return p?w:w.endOf(v)},$=function(Y,b){return x.w(i.toDate()[Y].apply(i.toDate("s"),(p?[0,0,0,0]:[23,59,59,999]).slice(b)),i)},y=this.$W,S=this.$M,O=this.$D,U="set"+(this.$u?"UTC":"");switch(m){case k:return p?E(1,0):E(31,11);case D:return p?E(1,S):E(0,S+1);case T:var P=this.$locale().weekStart||0,z=(y<P?y+7:y)-P;return E(p?O-z:O+(6-z),S);case v:case C:return $(U+"Hours",0);case h:return $(U+"Minutes",1);case l:return $(U+"Seconds",2);case n:return $(U+"Milliseconds",3);default:return this.clone()}},a.endOf=function(r){return this.startOf(r,!1)},a.$set=function(r,f){var i,p=x.p(r),m="set"+(this.$u?"UTC":""),E=(i={},i[v]=m+"Date",i[C]=m+"Date",i[D]=m+"Month",i[k]=m+"FullYear",i[h]=m+"Hours",i[l]=m+"Minutes",i[n]=m+"Seconds",i[t]=m+"Milliseconds",i)[p],$=p===v?this.$D+(f-this.$W):f;if(p===D||p===k){var y=this.clone().set(C,1);y.$d[E]($),y.init(),this.$d=y.set(C,Math.min(this.$D,y.daysInMonth())).$d}else E&&this.$d[E]($);return this.init(),this},a.set=function(r,f){return this.clone().$set(r,f)},a.get=function(r){return this[x.p(r)]()},a.add=function(r,f){var i,p=this;r=Number(r);var m=x.p(f),E=function(S){var O=M(p);return x.w(O.date(O.date()+Math.round(S*r)),p)};if(m===D)return this.set(D,this.$M+r);if(m===k)return this.set(k,this.$y+r);if(m===v)return E(1);if(m===T)return E(7);var $=(i={},i[l]=o,i[h]=e,i[n]=u,i)[m]||1,y=this.$d.getTime()+r*$;return x.w(y,this)},a.subtract=function(r,f){return this.add(-1*r,f)},a.format=function(r){var f=this,i=this.$locale();if(!this.isValid())return i.invalidDate||A;var p=r||"YYYY-MM-DDTHH:mm:ssZ",m=x.z(this),E=this.$H,$=this.$m,y=this.$M,S=i.weekdays,O=i.months,U=i.meridiem,P=function(b,w,B,Q){return b&&(b[w]||b(f,p))||B[w].slice(0,Q)},z=function(b){return x.s(E%12||12,b,"0")},Y=U||function(b,w,B){var Q=b<12?"AM":"PM";return B?Q.toLowerCase():Q};return p.replace(Dt,function(b,w){return w||function(B){switch(B){case"YY":return String(f.$y).slice(-2);case"YYYY":return x.s(f.$y,4,"0");case"M":return y+1;case"MM":return x.s(y+1,2,"0");case"MMM":return P(i.monthsShort,y,O,3);case"MMMM":return P(O,y);case"D":return f.$D;case"DD":return x.s(f.$D,2,"0");case"d":return String(f.$W);case"dd":return P(i.weekdaysMin,f.$W,S,2);case"ddd":return P(i.weekdaysShort,f.$W,S,3);case"dddd":return S[f.$W];case"H":return String(E);case"HH":return x.s(E,2,"0");case"h":return z(1);case"hh":return z(2);case"a":return Y(E,$,!0);case"A":return Y(E,$,!1);case"m":return String($);case"mm":return x.s($,2,"0");case"s":return String(f.$s);case"ss":return x.s(f.$s,2,"0");case"SSS":return x.s(f.$ms,3,"0");case"Z":return m}return null}(b)||m.replace(":","")})},a.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},a.diff=function(r,f,i){var p,m=this,E=x.p(f),$=M(r),y=($.utcOffset()-this.utcOffset())*o,S=this-$,O=function(){return x.m(m,$)};switch(E){case k:p=O()/12;break;case D:p=O();break;case F:p=O()/3;break;case T:p=(S-y)/6048e5;break;case v:p=(S-y)/864e5;break;case h:p=S/e;break;case l:p=S/o;break;case n:p=S/u;break;default:p=S}return i?p:x.a(p)},a.daysInMonth=function(){return this.endOf(D).$D},a.$locale=function(){return R[this.$L]},a.locale=function(r,f){if(!r)return this.$L;var i=this.clone(),p=X(r,f,!0);return p&&(i.$L=p),i},a.clone=function(){return x.w(this.$d,this)},a.toDate=function(){return new Date(this.valueOf())},a.toJSON=function(){return this.isValid()?this.toISOString():null},a.toISOString=function(){return this.$d.toISOString()},a.toString=function(){return this.$d.toUTCString()},d}(),ht=Z.prototype;return M.prototype=ht,[["$ms",t],["$s",n],["$m",l],["$H",h],["$W",v],["$M",D],["$y",k],["$D",C]].forEach(function(d){ht[d[1]]=function(a){return this.$g(a,d[0],d[1])}}),M.extend=function(d,a){return d.$i||(d(a,Z,M),d.$i=!0),M},M.locale=X,M.isDayjs=it,M.unix=function(d){return M(1e3*d)},M.en=R[G],M.Ls=R,M.p={},M})}(et)),et.exports}var It=Yt();const mt=$t(It),vt=_.lazy(()=>new Promise(s=>setTimeout(()=>s(_t(()=>import("./RemoveTask-CTGEGkbw.js"),__vite__mapDeps([0,1,2]))),1e3))),Lt=({id:s,name:c,desc:u,done:o,start:e,end:t})=>{const n=J(v=>v.toggleTask),l=J(v=>v.openModal),h=async()=>{await vt,l({title:"Удалить задачу",body:g.jsx(vt,{id:s,name:c}),maxWidth:"400px"})};return g.jsxs("div",{className:tt.Task,children:[g.jsxs("div",{className:tt.info,children:[g.jsx("h3",{className:tt.name,children:c}),u&&g.jsx("p",{children:u}),g.jsxs("p",{children:["Выполнить с ",mt(e).format("DD.MM.YYYY")," по ",mt(t).format("DD.MM.YYYY")]})]}),g.jsxs("div",{className:tt.actions,children:[g.jsx(at,{onClick:()=>n(s),children:o?"Возобновить":"Завершить"}),g.jsx(at,{onClick:h,children:"Удалить"})]})]})},Ht="_Title_uz6n6_1",Ft={Title:Ht},Ut=({children:s})=>g.jsx("h3",{className:Ft.Title,children:s}),Wt="_Collapser_1l6rh_1",Vt="_closed_1l6rh_6",At="_cell_1l6rh_9",st={Collapser:Wt,closed:Vt,cell:At},Gt=_.forwardRef(({children:s,smoothAppear:c},u)=>{const[o,e]=_.useState(c);return _.useEffect(()=>{setTimeout(()=>e(!1),0)},[]),_.useImperativeHandle(u,()=>({close:()=>{e(!0)},open:()=>{e(!1)}})),g.jsx("div",{className:kt(st.Collapser,o&&st.closed),children:g.jsx("div",{className:st.cell,children:s})})}),zt="_Tasks_1islh_1",Bt="_addTaskButton_1islh_6",xt={Tasks:zt,addTaskButton:Bt};function ot(){return ot=Object.assign?Object.assign.bind():function(s){for(var c=1;c<arguments.length;c++){var u=arguments[c];for(var o in u)({}).hasOwnProperty.call(u,o)&&(s[o]=u[o])}return s},ot.apply(null,arguments)}function Tt(s,c){if(s==null)return{};var u={};for(var o in s)if({}.hasOwnProperty.call(s,o)){if(c.indexOf(o)!==-1)continue;u[o]=s[o]}return u}function ut(s,c){return ut=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(u,o){return u.__proto__=o,u},ut(s,c)}function Mt(s,c){s.prototype=Object.create(c.prototype),s.prototype.constructor=s,ut(s,c)}const Et={disabled:!1},nt=j.createContext(null);var qt=function(c){return c.scrollTop},q="unmounted",I="exited",L="entering",V="entered",ct="exiting",N=function(s){Mt(c,s);function c(o,e){var t;t=s.call(this,o,e)||this;var n=e,l=n&&!n.isMounting?o.enter:o.appear,h;return t.appearStatus=null,o.in?l?(h=I,t.appearStatus=L):h=V:o.unmountOnExit||o.mountOnEnter?h=q:h=I,t.state={status:h},t.nextCallback=null,t}c.getDerivedStateFromProps=function(e,t){var n=e.in;return n&&t.status===q?{status:I}:null};var u=c.prototype;return u.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},u.componentDidUpdate=function(e){var t=null;if(e!==this.props){var n=this.state.status;this.props.in?n!==L&&n!==V&&(t=L):(n===L||n===V)&&(t=ct)}this.updateStatus(!1,t)},u.componentWillUnmount=function(){this.cancelNextCallback()},u.getTimeouts=function(){var e=this.props.timeout,t,n,l;return t=n=l=e,e!=null&&typeof e!="number"&&(t=e.exit,n=e.enter,l=e.appear!==void 0?e.appear:n),{exit:t,enter:n,appear:l}},u.updateStatus=function(e,t){if(e===void 0&&(e=!1),t!==null)if(this.cancelNextCallback(),t===L){if(this.props.unmountOnExit||this.props.mountOnEnter){var n=this.props.nodeRef?this.props.nodeRef.current:K.findDOMNode(this);n&&qt(n)}this.performEnter(e)}else this.performExit();else this.props.unmountOnExit&&this.state.status===I&&this.setState({status:q})},u.performEnter=function(e){var t=this,n=this.props.enter,l=this.context?this.context.isMounting:e,h=this.props.nodeRef?[l]:[K.findDOMNode(this),l],v=h[0],T=h[1],D=this.getTimeouts(),F=l?D.appear:D.enter;if(!e&&!n||Et.disabled){this.safeSetState({status:V},function(){t.props.onEntered(v)});return}this.props.onEnter(v,T),this.safeSetState({status:L},function(){t.props.onEntering(v,T),t.onTransitionEnd(F,function(){t.safeSetState({status:V},function(){t.props.onEntered(v,T)})})})},u.performExit=function(){var e=this,t=this.props.exit,n=this.getTimeouts(),l=this.props.nodeRef?void 0:K.findDOMNode(this);if(!t||Et.disabled){this.safeSetState({status:I},function(){e.props.onExited(l)});return}this.props.onExit(l),this.safeSetState({status:ct},function(){e.props.onExiting(l),e.onTransitionEnd(n.exit,function(){e.safeSetState({status:I},function(){e.props.onExited(l)})})})},u.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},u.safeSetState=function(e,t){t=this.setNextCallback(t),this.setState(e,t)},u.setNextCallback=function(e){var t=this,n=!0;return this.nextCallback=function(l){n&&(n=!1,t.nextCallback=null,e(l))},this.nextCallback.cancel=function(){n=!1},this.nextCallback},u.onTransitionEnd=function(e,t){this.setNextCallback(t);var n=this.props.nodeRef?this.props.nodeRef.current:K.findDOMNode(this),l=e==null&&!this.props.addEndListener;if(!n||l){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var h=this.props.nodeRef?[this.nextCallback]:[n,this.nextCallback],v=h[0],T=h[1];this.props.addEndListener(v,T)}e!=null&&setTimeout(this.nextCallback,e)},u.render=function(){var e=this.state.status;if(e===q)return null;var t=this.props,n=t.children;t.in,t.mountOnEnter,t.unmountOnExit,t.appear,t.enter,t.exit,t.timeout,t.addEndListener,t.onEnter,t.onEntering,t.onEntered,t.onExit,t.onExiting,t.onExited,t.nodeRef;var l=Tt(t,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return j.createElement(nt.Provider,{value:null},typeof n=="function"?n(e,l):j.cloneElement(j.Children.only(n),l))},c}(j.Component);N.contextType=nt;N.propTypes={};function W(){}N.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:W,onEntering:W,onEntered:W,onExit:W,onExiting:W,onExited:W};N.UNMOUNTED=q;N.EXITED=I;N.ENTERING=L;N.ENTERED=V;N.EXITING=ct;function Jt(s){if(s===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return s}function lt(s,c){var u=function(t){return c&&_.isValidElement(t)?c(t):t},o=Object.create(null);return s&&_.Children.map(s,function(e){return e}).forEach(function(e){o[e.key]=u(e)}),o}function Xt(s,c){s=s||{},c=c||{};function u(T){return T in c?c[T]:s[T]}var o=Object.create(null),e=[];for(var t in s)t in c?e.length&&(o[t]=e,e=[]):e.push(t);var n,l={};for(var h in c){if(o[h])for(n=0;n<o[h].length;n++){var v=o[h][n];l[o[h][n]]=u(v)}l[h]=u(h)}for(n=0;n<e.length;n++)l[e[n]]=u(e[n]);return l}function H(s,c,u){return u[c]!=null?u[c]:s.props[c]}function Zt(s,c){return lt(s.children,function(u){return _.cloneElement(u,{onExited:c.bind(null,u),in:!0,appear:H(u,"appear",s),enter:H(u,"enter",s),exit:H(u,"exit",s)})})}function Qt(s,c,u){var o=lt(s.children),e=Xt(c,o);return Object.keys(e).forEach(function(t){var n=e[t];if(_.isValidElement(n)){var l=t in c,h=t in o,v=c[t],T=_.isValidElement(v)&&!v.props.in;h&&(!l||T)?e[t]=_.cloneElement(n,{onExited:u.bind(null,n),in:!0,exit:H(n,"exit",s),enter:H(n,"enter",s)}):!h&&l&&!T?e[t]=_.cloneElement(n,{in:!1}):h&&l&&_.isValidElement(v)&&(e[t]=_.cloneElement(n,{onExited:u.bind(null,n),in:v.props.in,exit:H(n,"exit",s),enter:H(n,"enter",s)}))}}),e}var Kt=Object.values||function(s){return Object.keys(s).map(function(c){return s[c]})},te={component:"div",childFactory:function(c){return c}},ft=function(s){Mt(c,s);function c(o,e){var t;t=s.call(this,o,e)||this;var n=t.handleExited.bind(Jt(t));return t.state={contextValue:{isMounting:!0},handleExited:n,firstRender:!0},t}var u=c.prototype;return u.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},u.componentWillUnmount=function(){this.mounted=!1},c.getDerivedStateFromProps=function(e,t){var n=t.children,l=t.handleExited,h=t.firstRender;return{children:h?Zt(e,l):Qt(e,n,l),firstRender:!1}},u.handleExited=function(e,t){var n=lt(this.props.children);e.key in n||(e.props.onExited&&e.props.onExited(t),this.mounted&&this.setState(function(l){var h=ot({},l.children);return delete h[e.key],{children:h}}))},u.render=function(){var e=this.props,t=e.component,n=e.childFactory,l=Tt(e,["component","childFactory"]),h=this.state.contextValue,v=Kt(this.state.children).map(n);return delete l.appear,delete l.enter,delete l.exit,t===null?j.createElement(nt.Provider,{value:h},v):j.createElement(nt.Provider,{value:h},j.createElement(t,l,v))},c}(j.Component);ft.propTypes={};ft.defaultProps=te;const gt=_.lazy(()=>new Promise(s=>setTimeout(()=>s(_t(()=>import("./AddTask-DKVwMxyC.js"),__vite__mapDeps([3,1,2,4]))),1e3))),ee=()=>{const s=J(n=>n.openModal),c=J(n=>n.setHeaderTitle),u=J(n=>n.tasks),[o,e]=_.useState(u);_.useEffect(()=>{c("Задачи")},[]),_.useEffect(()=>{e(u.map(n=>({...n,isNew:!o.filter(l=>l.id===n.id).length})))},[u]);const t=async()=>{await gt,s({title:"Добавить задачу",body:g.jsx(gt,{}),width:"400px"})};return g.jsxs(g.Fragment,{children:[g.jsx(ft,{component:"ul",className:xt.Tasks,children:o.map(({id:n,name:l,desc:h,done:v,start:T,end:D,isNew:F})=>{const k=_.createRef(),C=_.createRef();return g.jsx(N,{timeout:300,nodeRef:k,onExit:()=>{var A;return(A=C==null?void 0:C.current)==null?void 0:A.close()},children:g.jsx("li",{ref:k,children:g.jsx(Gt,{ref:C,smoothAppear:F,children:g.jsx(Lt,{id:n,name:l,desc:h,done:v,start:T,end:D})})})},n)})}),!u.length&&g.jsx(Ut,{children:"Задач не найдено"}),g.jsx(at,{className:xt.addTaskButton,onClick:t,children:"Добавить задачу"})]})},re=Object.freeze(Object.defineProperty({__proto__:null,default:ee},Symbol.toStringTag,{value:"Module"}));export{re as T,mt as d,Ct as r};
