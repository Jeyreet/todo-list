import{L as o,r as a,j as e,T as b,G as f,I as C,M as E,B as k,u as q}from"./index-0cGgJsEO.js";import{C as y}from"./Collapser-B6hshlFr.js";import{a as V,b as R,M as G,P as $,A as D,u as W,H as A}from"./trashcan-p0s8fzz8.js";import{S as P}from"./Switch-CbxvDDLW.js";import{A as F}from"./AreaInput-BhbHRO_C.js";import{R as B}from"./Radio-CZ3eIO5T.js";const X={},H=(t,s,r)=>(clearTimeout(t),setTimeout(s,r)),z="_inner_1ualu_1",U="_storeButton_1ualu_5",J="_importIcon_1ualu_9",K="_exportIcon_1ualu_13",O="_gap_1ualu_17",u={inner:z,storeButton:U,importIcon:J,exportIcon:K,gap:O},Q=()=>{const t=V(),{control:s,getValues:r,setValue:l,watch:n,handleSubmit:i}=R({mode:"onSubmit",defaultValues:{settingsImportProtection:o.getSettingsImportProtection()}}),c=n("settingsImportProtection");a.useEffect(()=>{c?o.enableSettingsImportProtection():o.disableSettingsImportProtection()},[c]);const _=()=>o.import(r("store")),g=()=>{const x=o.export();l("store",x),navigator.clipboard.writeText(x)};return e.jsxs(e.Fragment,{children:[e.jsx(b,{indent:!0,children:"Хранилище"}),e.jsxs("form",{onSubmit:i(_),children:[e.jsx(F,{label:"Импорт и экспорт",placeholder:"Ваши данные...",name:"store",rules:{required:"Заполните данные для импорта"},control:s}),e.jsx(P,{label:"Предотвратить импортирование настроек",name:"settingsImportProtection",control:s}),e.jsxs(f,{className:u.gap,children:[e.jsx(C,{className:u.storeButton,cs:{icon:u.importIcon},icon:E,label:"Импорт",type:"submit"}),e.jsx(C,{className:u.storeButton,cs:{icon:u.exportIcon},icon:E,label:"Экспорт",onClick:g}),e.jsx(C,{className:u.storeButton,cs:{inner:u.inner},icon:G,label:"Сброс",onClick:t.open})]})]}),e.jsx($,{controls:t,maxWidth:450,children:e.jsxs(f,{column:!0,children:[e.jsx(b,{children:"Сброс"}),e.jsx("p",{children:"Вы уверены, что хотите полностью очистить хранилище? Это действие невозможно отменить!"}),e.jsxs(D,{children:[e.jsx(k,{cs:{inner:u.inner},onClick:()=>{o.reset(),t.close()},children:"Подтвердить"}),e.jsx(k,{onClick:t.close,children:"Отменить сброс"})]})]})})]})},Y=()=>{const t=o.enableTaskRemoveConfirmation,s=o.disableTaskRemoveConfirmation,{control:r,watch:l}=R({mode:"onChange",defaultValues:{tasksRemoveConfirmation:o.getTaskRemoveConfirmation()}}),n=l("tasksRemoveConfirmation");return a.useEffect(()=>{n?t():s()},[s,t,n]),e.jsxs(e.Fragment,{children:[e.jsx(b,{children:"Задачи"}),e.jsx(P,{name:"tasksRemoveConfirmation",label:"Подтверждение удаления задачи",control:r})]})},Z="_input_qw02o_1",ee="_line_qw02o_12",te="_linePadding_qw02o_19",oe="_selectorPosition_qw02o_25",se="_selectorWrapper_qw02o_35",ne="_selector_qw02o_25",m={input:Z,line:ee,linePadding:te,selectorPosition:oe,selectorWrapper:se,selector:ne},M=t=>t<0?0:t>100?100:t,re=({label:t,name:s,placeholder:r,rules:l,control:n,autoFocus:i})=>{const{field:{onChange:c,onBlur:_,value:g,ref:x},fieldState:{error:w}}=W({name:s,rules:l,control:n}),T=a.useRef(null),N=d=>{const p=d.target,j=Number(p.value.replace(/\D/,""));c(M(j))},I=d=>{d.preventDefault();const p=d.type==="touchstart",j=T.current.getBoundingClientRect(),h=S=>{const L=((p?S.touches[0].clientX:S.clientX)-j.left)/j.width*100;c(M(Math.round(L)))};h(d);const v=()=>{p?(document.removeEventListener("touchmove",h),document.removeEventListener("touchend",v)):(document.removeEventListener("mousemove",h),document.removeEventListener("mouseup",v))};p?(document.addEventListener("touchmove",h),document.addEventListener("touchend",v)):(document.addEventListener("mousemove",h),document.addEventListener("mouseup",v))};return e.jsxs("label",{children:[e.jsx(A,{label:t,error:w}),e.jsxs(f,{children:[e.jsx("div",{className:m.line,onMouseDown:I,onTouchStart:I,children:e.jsx("div",{className:m.linePadding,ref:T,children:e.jsx("div",{className:m.selectorPosition,style:{left:`${g}%`},children:e.jsx("div",{className:m.selectorWrapper,children:e.jsx("div",{className:m.selector})})})})}),e.jsx("input",{className:m.input,onChange:N,onBlur:_,value:g??"",ref:x,placeholder:r,type:"text",autoFocus:i})]})]})},ae="_gap_1oqve_1",le={gap:ae},ie=()=>{const{control:t,watch:s}=R({mode:"onChange",defaultValues:{themeMainColor:o.getThemeMainColor(),borderRadius:o.getBorderRadius(),theme:o.getTheme(),gap:o.getGap()}}),r=s("themeMainColor"),l=s("borderRadius"),n=s("theme"),i=s("gap");let c=a.useRef(null);return a.useEffect(()=>{c.current=H(c.current,()=>o.setThemeMainColor(r),200)},[r]),a.useEffect(()=>{l?o.enableBorderRadius():o.disableBorderRadius()},[l]),a.useEffect(()=>{n==="system"?o.clearTheme():n==="light"?o.setLightTheme():n==="dark"&&o.setDarkTheme()},[n]),a.useEffect(()=>{i==="small"?o.setSmallGap():i==="big"?o.setBigGap():i==="standard"&&o.setStandardGap()},[i]),e.jsxs(e.Fragment,{children:[e.jsx(b,{indent:!0,children:"Визуальное оформление"}),e.jsx(re,{name:"themeMainColor",label:"Основной цвет",control:t}),e.jsx(P,{name:"borderRadius",label:"Скругления углов",control:t}),e.jsxs(f,{className:le.gap,children:[e.jsx(B,{name:"theme",label:"Тема",options:[{value:"light",label:"Светлая"},{value:"dark",label:"Темная"},{value:"system",label:"Как в системе"}],control:t}),e.jsx(B,{name:"gap",label:"Отступы",options:[{value:"small",label:"Маленькие"},{value:"standard",label:"Стандартные"},{value:"big",label:"Большие"}],control:t})]})]})},ge=()=>{const t=q(s=>s.setCurrentPageTitle);return a.useLayoutEffect(()=>t("Настройки")),e.jsx(y,{children:e.jsxs(f,{column:!0,className:X.Settings,children:[e.jsx(Y,{}),e.jsx(ie,{}),e.jsx(Q,{})]})})};export{ge as Settings};
