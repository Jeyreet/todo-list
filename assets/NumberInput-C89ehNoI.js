import{r,j as l}from"./index-Drd5J5gP.js";import{u as _,H as $}from"./Switch-DnfmqdMb.js";const k=(o,n)=>(o/10**n).toLocaleString("ru-RU",{minimumFractionDigits:n,maximumFractionDigits:n}),H="_input_1rku8_1",P={input:H},L=r.memo(({label:o,name:n,rules:h,control:b,precision:s=0,autoFocus:N,cs:R={}})=>{const{field:{onChange:u,onBlur:j,value:a,ref:A},fieldState:{error:I}}=_({name:n,rules:h,control:b}),[S,V]=r.useState("");r.useEffect(()=>{Number.isInteger(a)||u(0)},[]),r.useEffect(()=>{Number.isInteger(a)&&V(k(a,s).replaceAll("Â ",""))},[s,a]);const v=i=>{var E;const c=i.target,m=c.value,p=m.replace(/[^\d.,-]/g,"").replace(".",",").replace(/(?!^)-/g,"");let e=c.selectionStart;const g=p.indexOf(","),y=g===-1?e:g,f=p.replaceAll(",",""),C=new RegExp(`^(.{${y}})(.*)$`),t=f.match(C),w=(s===0?f:t==null?void 0:t[1])||"0",D=((t==null?void 0:t[2])||"0").substring(0,s).padEnd(s,"0"),F=parseInt(w+D),x=i.nativeEvent.inputType==="insertText",T=new RegExp(`(.{${e-1}})(.)(.*)`),d=(E=m.match(T))==null?void 0:E[2];x&&/[^\d,]/.test(d)&&e--,x&&/-/.test(d)&&e===0&&e++,u(F),requestAnimationFrame(()=>setTimeout(()=>c.setSelectionRange(e,e),0))};return l.jsxs("label",{children:[l.jsx($,{className:R.header,label:o,error:I}),l.jsx("input",{className:P.input,onChange:v,onBlur:j,value:S,ref:A,type:"text",autoFocus:N})]})});export{L as N,k as m};
