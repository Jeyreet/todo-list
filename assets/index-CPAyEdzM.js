import{L as o,r as a,j as e,T as v,G as f,I as C,M as S,B as E,u as y}from"./index-C8NeU3pf.js";import{C as V}from"./Collapser-C5YxHP45.js";import{a as G,b as k,M as $,P as D,A as W,u as A,H as F}from"./trashcan-CJXhkqEw.js";import{S as R}from"./Switch-ChKDu-bI.js";import{A as X}from"./AreaInput-D_Mk4EQs.js";import{R as B}from"./Radio-GHKhiy1L.js";const q={},H=(t,s,r)=>(clearTimeout(t),setTimeout(s,r)),z="_inner_1ualu_1",U="_storeButton_1ualu_5",J="_importIcon_1ualu_9",K="_exportIcon_1ualu_13",O="_gap_1ualu_17",m={inner:z,storeButton:U,importIcon:J,exportIcon:K,gap:O},Q=()=>{const t=G(),{control:s,getValues:r,setValue:i,watch:n,handleSubmit:l}=k({mode:"onSubmit",defaultValues:{settingsImportProtection:o.getSettingsImportProtection()}}),c=n("settingsImportProtection");a.useEffect(()=>{c?o.enableSettingsImportProtection():o.disableSettingsImportProtection()},[c]);const _=()=>o.import(r("store")),g=()=>{const x=o.export();i("store",x),navigator.clipboard.writeText(x)};return e.jsxs(e.Fragment,{children:[e.jsx(v,{indent:!0,children:"Хранилище"}),e.jsxs("form",{onSubmit:l(_),children:[e.jsx(X,{label:"Импорт и экспорт",placeholder:"Ваши данные...",name:"store",rules:{required:"Заполните данные для импорта"},control:s}),e.jsx(R,{label:"Предотвратить импортирование настроек",name:"settingsImportProtection",control:s}),e.jsxs(f,{className:m.gap,children:[e.jsx(C,{className:m.storeButton,cs:{icon:m.importIcon},icon:S,label:"Импорт",type:"submit"}),e.jsx(C,{className:m.storeButton,cs:{icon:m.exportIcon},icon:S,label:"Экспорт",onClick:g}),e.jsx(C,{className:m.storeButton,cs:{inner:m.inner},icon:$,label:"Сброс",onClick:t.open})]})]}),e.jsx(D,{controls:t,maxWidth:450,children:e.jsxs(f,{column:!0,children:[e.jsx(v,{children:"Сброс"}),e.jsx("p",{children:"Вы уверены, что хотите полностью очистить хранилище? Это действие невозможно отменить!"}),e.jsxs(W,{children:[e.jsx(E,{cs:{inner:m.inner},onClick:()=>{o.reset(),t.close()},children:"Подтвердить"}),e.jsx(E,{onClick:t.close,children:"Отменить сброс"})]})]})})]})},Y=()=>{const t=o.enableTaskRemoveConfirmation,s=o.disableTaskRemoveConfirmation,{control:r,watch:i}=k({mode:"onChange",defaultValues:{tasksRemoveConfirmation:o.getTaskRemoveConfirmation()}}),n=i("tasksRemoveConfirmation");return a.useEffect(()=>{n?t():s()},[s,t,n]),e.jsxs(e.Fragment,{children:[e.jsx(v,{children:"Задачи"}),e.jsx(R,{name:"tasksRemoveConfirmation",label:"Подтверждение удаления задачи",control:r})]})},Z="_input_i4bmk_1",ee="_line_i4bmk_12",te="_linePadding_i4bmk_24",oe="_selectorPosition_i4bmk_30",se="_selectorWrapper_i4bmk_40",ne="_selector_i4bmk_30",u={input:Z,line:ee,linePadding:te,selectorPosition:oe,selectorWrapper:se,selector:ne},M=t=>t<0?0:t>100?100:t,re=({label:t,name:s,placeholder:r,rules:i,control:n,autoFocus:l})=>{const{field:{onChange:c,onBlur:_,value:g,ref:x},fieldState:{error:N}}=A({name:s,rules:i,control:n}),P=a.useRef(null),L=d=>{const p=d.target,b=Number(p.value.replace(/\D/,""));c(M(b))},T=d=>{d.preventDefault();const p=d.type==="touchstart",b=P.current.getBoundingClientRect(),h=I=>{const w=((p?I.touches[0].clientX:I.clientX)-b.left)/b.width*100;c(M(Math.round(w)))};h(d);const j=()=>{p?(document.removeEventListener("touchmove",h),document.removeEventListener("touchend",j)):(document.removeEventListener("mousemove",h),document.removeEventListener("mouseup",j))};p?(document.addEventListener("touchmove",h),document.addEventListener("touchend",j)):(document.addEventListener("mousemove",h),document.addEventListener("mouseup",j))};return e.jsxs("label",{children:[e.jsx(F,{label:t,error:N}),e.jsxs(f,{children:[e.jsx("div",{className:u.line,onMouseDown:T,onTouchStart:T,children:e.jsx("div",{className:u.linePadding,ref:P,children:e.jsx("div",{className:u.selectorPosition,style:{left:`${g}%`},children:e.jsx("div",{className:u.selectorWrapper,children:e.jsx("div",{className:u.selector})})})})}),e.jsx("input",{className:u.input,onChange:L,onBlur:_,value:g??"",ref:x,placeholder:r,type:"text",autoFocus:l})]})]})},ae="_gap_1oqve_1",ie={gap:ae},le=()=>{const{control:t,watch:s}=k({mode:"onChange",defaultValues:{themeMainColor:o.getThemeMainColor(),borderRadius:o.getBorderRadius(),theme:o.getTheme(),gap:o.getGap()}}),r=s("themeMainColor"),i=s("borderRadius"),n=s("theme"),l=s("gap");let c=a.useRef(null);return a.useEffect(()=>{c.current=H(c.current,()=>o.setThemeMainColor(r),200)},[r]),a.useEffect(()=>{i?o.enableBorderRadius():o.disableBorderRadius()},[i]),a.useEffect(()=>{n==="system"?o.clearTheme():n==="light"?o.setLightTheme():n==="dark"&&o.setDarkTheme()},[n]),a.useEffect(()=>{l==="small"?o.setSmallGap():l==="big"?o.setBigGap():l==="standard"&&o.setStandardGap()},[l]),e.jsxs(e.Fragment,{children:[e.jsx(v,{indent:!0,children:"Визуальное оформление"}),e.jsx(re,{name:"themeMainColor",label:"Основной цвет",control:t}),e.jsx(R,{name:"borderRadius",label:"Скругления углов",control:t}),e.jsxs(f,{className:ie.gap,children:[e.jsx(B,{name:"theme",label:"Тема",options:[{value:"light",label:"Светлая"},{value:"dark",label:"Темная"},{value:"system",label:"Как в системе"}],control:t}),e.jsx(B,{name:"gap",label:"Отступы",options:[{value:"small",label:"Маленькие"},{value:"standard",label:"Стандартные"},{value:"big",label:"Большие"}],control:t})]})]})},ge=()=>{const t=y(s=>s.setCurrentPageTitle);return a.useLayoutEffect(()=>t("Настройки")),e.jsx(V,{children:e.jsxs(f,{column:!0,className:q.Settings,children:[e.jsx(Y,{}),e.jsx(le,{}),e.jsx(Q,{})]})})};export{ge as Settings};
