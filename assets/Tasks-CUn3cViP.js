const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/RemoveTask-C6hJUb0F.js","assets/index-d113ghzT.js","assets/index-BGry3zb9.css","assets/AddTask-Bqnh3unI.js","assets/Title-CyPPYOBi.js","assets/Title-Cg3XzO0q.css","assets/AddTask-CBxO2kFd.css"])))=>i.map(i=>d[i]);
import{g as $t,a as kt,u as X,j as $,c as _t,B as at,r as _,_ as Mt,R as j}from"./index-d113ghzT.js";import{T as Ct}from"./Title-CyPPYOBi.js";var jt=kt();const tt=$t(jt),Nt="_Task_k7s6x_1",wt="_done_k7s6x_19",Rt="_info_k7s6x_25",Pt="_name_k7s6x_37",Yt="_actions_k7s6x_43",q={Task:Nt,done:wt,info:Rt,name:Pt,actions:Yt};var et={exports:{}},It=et.exports,pt;function Lt(){return pt||(pt=1,function(o,c){(function(u,a){o.exports=a()})(It,function(){var u=1e3,a=6e4,e=36e5,t="millisecond",n="second",l="minute",h="hour",v="day",M="week",D="month",F="quarter",k="year",C="date",A="Invalid Date",Dt=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,St=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,bt={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(d){var s=["th","st","nd","rd"],r=d%100;return"["+d+(s[(r-20)%10]||s[r]||s[0])+"]"}},rt=function(d,s,r){var f=String(d);return!f||f.length>=s?d:""+Array(s+1-f.length).join(r)+d},Ot={s:rt,z:function(d){var s=-d.utcOffset(),r=Math.abs(s),f=Math.floor(r/60),i=r%60;return(s<=0?"+":"-")+rt(f,2,"0")+":"+rt(i,2,"0")},m:function d(s,r){if(s.date()<r.date())return-d(r,s);var f=12*(r.year()-s.year())+(r.month()-s.month()),i=s.clone().add(f,D),p=r-i<0,m=s.clone().add(f+(p?-1:1),D);return+(-(f+(r-i)/(p?i-m:m-i))||0)},a:function(d){return d<0?Math.ceil(d)||0:Math.floor(d)},p:function(d){return{M:D,y:k,w:M,d:v,D:C,h,m:l,s:n,ms:t,Q:F}[d]||String(d||"").toLowerCase().replace(/s$/,"")},u:function(d){return d===void 0}},G="en",R={};R[G]=bt;var dt="$isDayjsObject",it=function(d){return d instanceof Q||!(!d||!d[dt])},Z=function d(s,r,f){var i;if(!s)return G;if(typeof s=="string"){var p=s.toLowerCase();R[p]&&(i=p),r&&(R[p]=r,i=p);var m=s.split("-");if(!i&&m.length>1)return d(m[0])}else{var E=s.name;R[E]=s,i=E}return!f&&i&&(G=i),i||!f&&G},T=function(d,s){if(it(d))return d.clone();var r=typeof s=="object"?s:{};return r.date=d,r.args=arguments,new Q(r)},x=Ot;x.l=Z,x.i=it,x.w=function(d,s){return T(d,{locale:s.$L,utc:s.$u,x:s.$x,$offset:s.$offset})};var Q=function(){function d(r){this.$L=Z(r.locale,null,!0),this.parse(r),this.$x=this.$x||r.x||{},this[dt]=!0}var s=d.prototype;return s.parse=function(r){this.$d=function(f){var i=f.date,p=f.utc;if(i===null)return new Date(NaN);if(x.u(i))return new Date;if(i instanceof Date)return new Date(i);if(typeof i=="string"&&!/Z$/i.test(i)){var m=i.match(Dt);if(m){var E=m[2]-1||0,g=(m[7]||"0").substring(0,3);return p?new Date(Date.UTC(m[1],E,m[3]||1,m[4]||0,m[5]||0,m[6]||0,g)):new Date(m[1],E,m[3]||1,m[4]||0,m[5]||0,m[6]||0,g)}}return new Date(i)}(r),this.init()},s.init=function(){var r=this.$d;this.$y=r.getFullYear(),this.$M=r.getMonth(),this.$D=r.getDate(),this.$W=r.getDay(),this.$H=r.getHours(),this.$m=r.getMinutes(),this.$s=r.getSeconds(),this.$ms=r.getMilliseconds()},s.$utils=function(){return x},s.isValid=function(){return this.$d.toString()!==A},s.isSame=function(r,f){var i=T(r);return this.startOf(f)<=i&&i<=this.endOf(f)},s.isAfter=function(r,f){return T(r)<this.startOf(f)},s.isBefore=function(r,f){return this.endOf(f)<T(r)},s.$g=function(r,f,i){return x.u(r)?this[f]:this.set(i,r)},s.unix=function(){return Math.floor(this.valueOf()/1e3)},s.valueOf=function(){return this.$d.getTime()},s.startOf=function(r,f){var i=this,p=!!x.u(f)||f,m=x.p(r),E=function(Y,b){var w=x.w(i.$u?Date.UTC(i.$y,b,Y):new Date(i.$y,b,Y),i);return p?w:w.endOf(v)},g=function(Y,b){return x.w(i.toDate()[Y].apply(i.toDate("s"),(p?[0,0,0,0]:[23,59,59,999]).slice(b)),i)},y=this.$W,S=this.$M,O=this.$D,U="set"+(this.$u?"UTC":"");switch(m){case k:return p?E(1,0):E(31,11);case D:return p?E(1,S):E(0,S+1);case M:var P=this.$locale().weekStart||0,B=(y<P?y+7:y)-P;return E(p?O-B:O+(6-B),S);case v:case C:return g(U+"Hours",0);case h:return g(U+"Minutes",1);case l:return g(U+"Seconds",2);case n:return g(U+"Milliseconds",3);default:return this.clone()}},s.endOf=function(r){return this.startOf(r,!1)},s.$set=function(r,f){var i,p=x.p(r),m="set"+(this.$u?"UTC":""),E=(i={},i[v]=m+"Date",i[C]=m+"Date",i[D]=m+"Month",i[k]=m+"FullYear",i[h]=m+"Hours",i[l]=m+"Minutes",i[n]=m+"Seconds",i[t]=m+"Milliseconds",i)[p],g=p===v?this.$D+(f-this.$W):f;if(p===D||p===k){var y=this.clone().set(C,1);y.$d[E](g),y.init(),this.$d=y.set(C,Math.min(this.$D,y.daysInMonth())).$d}else E&&this.$d[E](g);return this.init(),this},s.set=function(r,f){return this.clone().$set(r,f)},s.get=function(r){return this[x.p(r)]()},s.add=function(r,f){var i,p=this;r=Number(r);var m=x.p(f),E=function(S){var O=T(p);return x.w(O.date(O.date()+Math.round(S*r)),p)};if(m===D)return this.set(D,this.$M+r);if(m===k)return this.set(k,this.$y+r);if(m===v)return E(1);if(m===M)return E(7);var g=(i={},i[l]=a,i[h]=e,i[n]=u,i)[m]||1,y=this.$d.getTime()+r*g;return x.w(y,this)},s.subtract=function(r,f){return this.add(-1*r,f)},s.format=function(r){var f=this,i=this.$locale();if(!this.isValid())return i.invalidDate||A;var p=r||"YYYY-MM-DDTHH:mm:ssZ",m=x.z(this),E=this.$H,g=this.$m,y=this.$M,S=i.weekdays,O=i.months,U=i.meridiem,P=function(b,w,z,K){return b&&(b[w]||b(f,p))||z[w].slice(0,K)},B=function(b){return x.s(E%12||12,b,"0")},Y=U||function(b,w,z){var K=b<12?"AM":"PM";return z?K.toLowerCase():K};return p.replace(St,function(b,w){return w||function(z){switch(z){case"YY":return String(f.$y).slice(-2);case"YYYY":return x.s(f.$y,4,"0");case"M":return y+1;case"MM":return x.s(y+1,2,"0");case"MMM":return P(i.monthsShort,y,O,3);case"MMMM":return P(O,y);case"D":return f.$D;case"DD":return x.s(f.$D,2,"0");case"d":return String(f.$W);case"dd":return P(i.weekdaysMin,f.$W,S,2);case"ddd":return P(i.weekdaysShort,f.$W,S,3);case"dddd":return S[f.$W];case"H":return String(E);case"HH":return x.s(E,2,"0");case"h":return B(1);case"hh":return B(2);case"a":return Y(E,g,!0);case"A":return Y(E,g,!1);case"m":return String(g);case"mm":return x.s(g,2,"0");case"s":return String(f.$s);case"ss":return x.s(f.$s,2,"0");case"SSS":return x.s(f.$ms,3,"0");case"Z":return m}return null}(b)||m.replace(":","")})},s.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},s.diff=function(r,f,i){var p,m=this,E=x.p(f),g=T(r),y=(g.utcOffset()-this.utcOffset())*a,S=this-g,O=function(){return x.m(m,g)};switch(E){case k:p=O()/12;break;case D:p=O();break;case F:p=O()/3;break;case M:p=(S-y)/6048e5;break;case v:p=(S-y)/864e5;break;case h:p=S/e;break;case l:p=S/a;break;case n:p=S/u;break;default:p=S}return i?p:x.a(p)},s.daysInMonth=function(){return this.endOf(D).$D},s.$locale=function(){return R[this.$L]},s.locale=function(r,f){if(!r)return this.$L;var i=this.clone(),p=Z(r,f,!0);return p&&(i.$L=p),i},s.clone=function(){return x.w(this.$d,this)},s.toDate=function(){return new Date(this.valueOf())},s.toJSON=function(){return this.isValid()?this.toISOString():null},s.toISOString=function(){return this.$d.toISOString()},s.toString=function(){return this.$d.toUTCString()},d}(),ht=Q.prototype;return T.prototype=ht,[["$ms",t],["$s",n],["$m",l],["$H",h],["$W",v],["$M",D],["$y",k],["$D",C]].forEach(function(d){ht[d[1]]=function(s){return this.$g(s,d[0],d[1])}}),T.extend=function(d,s){return d.$i||(d(s,Q,T),d.$i=!0),T},T.locale=Z,T.isDayjs=it,T.unix=function(d){return T(1e3*d)},T.en=R[G],T.Ls=R,T.p={},T})}(et)),et.exports}var Ht=Lt();const mt=$t(Ht),vt=_.lazy(()=>new Promise(o=>setTimeout(()=>o(Mt(()=>import("./RemoveTask-C6hJUb0F.js"),__vite__mapDeps([0,1,2]))),1e3))),Ft=({id:o,name:c,desc:u,done:a,start:e,end:t})=>{const n=X(v=>v.toggleTask),l=X(v=>v.openModal),h=async()=>{await vt,l({title:"Удалить задачу",body:$.jsx(vt,{id:o,name:c}),maxWidth:"400px"})};return $.jsxs("div",{className:_t(q.Task,a&&q.done),children:[$.jsxs("div",{className:q.info,children:[$.jsx("h3",{className:q.name,children:c}),u&&$.jsx("p",{children:u}),$.jsxs("p",{children:["Выполнить с ",mt(e).format("DD.MM.YYYY")," по ",mt(t).format("DD.MM.YYYY")]})]}),$.jsxs("div",{className:q.actions,children:[$.jsx(at,{onClick:()=>n(o),children:a?"Возобновить":"Завершить"}),$.jsx(at,{onClick:h,children:"Удалить"})]})]})},Ut="_Collapser_156u8_1",Wt="_closed_156u8_11",Vt="_cell_156u8_17",st={Collapser:Ut,closed:Wt,cell:Vt},At=_.forwardRef(({children:o,smoothAppear:c},u)=>{const[a,e]=_.useState(c);return _.useEffect(()=>{setTimeout(()=>e(!1),0)},[]),_.useImperativeHandle(u,()=>({close:()=>{e(!0)},open:()=>{e(!1)}})),$.jsx("div",{className:_t(st.Collapser,a&&st.closed),children:$.jsx("div",{className:st.cell,children:o})})}),Gt="_Tasks_1pmqu_1",Bt="_addTaskButton_1pmqu_11",xt={Tasks:Gt,addTaskButton:Bt};function ot(){return ot=Object.assign?Object.assign.bind():function(o){for(var c=1;c<arguments.length;c++){var u=arguments[c];for(var a in u)({}).hasOwnProperty.call(u,a)&&(o[a]=u[a])}return o},ot.apply(null,arguments)}function Tt(o,c){if(o==null)return{};var u={};for(var a in o)if({}.hasOwnProperty.call(o,a)){if(c.indexOf(a)!==-1)continue;u[a]=o[a]}return u}function ut(o,c){return ut=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(u,a){return u.__proto__=a,u},ut(o,c)}function yt(o,c){o.prototype=Object.create(c.prototype),o.prototype.constructor=o,ut(o,c)}const Et={disabled:!1},nt=j.createContext(null);var zt=function(c){return c.scrollTop},J="unmounted",I="exited",L="entering",V="entered",ct="exiting",N=function(o){yt(c,o);function c(a,e){var t;t=o.call(this,a,e)||this;var n=e,l=n&&!n.isMounting?a.enter:a.appear,h;return t.appearStatus=null,a.in?l?(h=I,t.appearStatus=L):h=V:a.unmountOnExit||a.mountOnEnter?h=J:h=I,t.state={status:h},t.nextCallback=null,t}c.getDerivedStateFromProps=function(e,t){var n=e.in;return n&&t.status===J?{status:I}:null};var u=c.prototype;return u.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},u.componentDidUpdate=function(e){var t=null;if(e!==this.props){var n=this.state.status;this.props.in?n!==L&&n!==V&&(t=L):(n===L||n===V)&&(t=ct)}this.updateStatus(!1,t)},u.componentWillUnmount=function(){this.cancelNextCallback()},u.getTimeouts=function(){var e=this.props.timeout,t,n,l;return t=n=l=e,e!=null&&typeof e!="number"&&(t=e.exit,n=e.enter,l=e.appear!==void 0?e.appear:n),{exit:t,enter:n,appear:l}},u.updateStatus=function(e,t){if(e===void 0&&(e=!1),t!==null)if(this.cancelNextCallback(),t===L){if(this.props.unmountOnExit||this.props.mountOnEnter){var n=this.props.nodeRef?this.props.nodeRef.current:tt.findDOMNode(this);n&&zt(n)}this.performEnter(e)}else this.performExit();else this.props.unmountOnExit&&this.state.status===I&&this.setState({status:J})},u.performEnter=function(e){var t=this,n=this.props.enter,l=this.context?this.context.isMounting:e,h=this.props.nodeRef?[l]:[tt.findDOMNode(this),l],v=h[0],M=h[1],D=this.getTimeouts(),F=l?D.appear:D.enter;if(!e&&!n||Et.disabled){this.safeSetState({status:V},function(){t.props.onEntered(v)});return}this.props.onEnter(v,M),this.safeSetState({status:L},function(){t.props.onEntering(v,M),t.onTransitionEnd(F,function(){t.safeSetState({status:V},function(){t.props.onEntered(v,M)})})})},u.performExit=function(){var e=this,t=this.props.exit,n=this.getTimeouts(),l=this.props.nodeRef?void 0:tt.findDOMNode(this);if(!t||Et.disabled){this.safeSetState({status:I},function(){e.props.onExited(l)});return}this.props.onExit(l),this.safeSetState({status:ct},function(){e.props.onExiting(l),e.onTransitionEnd(n.exit,function(){e.safeSetState({status:I},function(){e.props.onExited(l)})})})},u.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},u.safeSetState=function(e,t){t=this.setNextCallback(t),this.setState(e,t)},u.setNextCallback=function(e){var t=this,n=!0;return this.nextCallback=function(l){n&&(n=!1,t.nextCallback=null,e(l))},this.nextCallback.cancel=function(){n=!1},this.nextCallback},u.onTransitionEnd=function(e,t){this.setNextCallback(t);var n=this.props.nodeRef?this.props.nodeRef.current:tt.findDOMNode(this),l=e==null&&!this.props.addEndListener;if(!n||l){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var h=this.props.nodeRef?[this.nextCallback]:[n,this.nextCallback],v=h[0],M=h[1];this.props.addEndListener(v,M)}e!=null&&setTimeout(this.nextCallback,e)},u.render=function(){var e=this.state.status;if(e===J)return null;var t=this.props,n=t.children;t.in,t.mountOnEnter,t.unmountOnExit,t.appear,t.enter,t.exit,t.timeout,t.addEndListener,t.onEnter,t.onEntering,t.onEntered,t.onExit,t.onExiting,t.onExited,t.nodeRef;var l=Tt(t,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return j.createElement(nt.Provider,{value:null},typeof n=="function"?n(e,l):j.cloneElement(j.Children.only(n),l))},c}(j.Component);N.contextType=nt;N.propTypes={};function W(){}N.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:W,onEntering:W,onEntered:W,onExit:W,onExiting:W,onExited:W};N.UNMOUNTED=J;N.EXITED=I;N.ENTERING=L;N.ENTERED=V;N.EXITING=ct;function qt(o){if(o===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return o}function lt(o,c){var u=function(t){return c&&_.isValidElement(t)?c(t):t},a=Object.create(null);return o&&_.Children.map(o,function(e){return e}).forEach(function(e){a[e.key]=u(e)}),a}function Jt(o,c){o=o||{},c=c||{};function u(M){return M in c?c[M]:o[M]}var a=Object.create(null),e=[];for(var t in o)t in c?e.length&&(a[t]=e,e=[]):e.push(t);var n,l={};for(var h in c){if(a[h])for(n=0;n<a[h].length;n++){var v=a[h][n];l[a[h][n]]=u(v)}l[h]=u(h)}for(n=0;n<e.length;n++)l[e[n]]=u(e[n]);return l}function H(o,c,u){return u[c]!=null?u[c]:o.props[c]}function Xt(o,c){return lt(o.children,function(u){return _.cloneElement(u,{onExited:c.bind(null,u),in:!0,appear:H(u,"appear",o),enter:H(u,"enter",o),exit:H(u,"exit",o)})})}function Zt(o,c,u){var a=lt(o.children),e=Jt(c,a);return Object.keys(e).forEach(function(t){var n=e[t];if(_.isValidElement(n)){var l=t in c,h=t in a,v=c[t],M=_.isValidElement(v)&&!v.props.in;h&&(!l||M)?e[t]=_.cloneElement(n,{onExited:u.bind(null,n),in:!0,exit:H(n,"exit",o),enter:H(n,"enter",o)}):!h&&l&&!M?e[t]=_.cloneElement(n,{in:!1}):h&&l&&_.isValidElement(v)&&(e[t]=_.cloneElement(n,{onExited:u.bind(null,n),in:v.props.in,exit:H(n,"exit",o),enter:H(n,"enter",o)}))}}),e}var Qt=Object.values||function(o){return Object.keys(o).map(function(c){return o[c]})},Kt={component:"div",childFactory:function(c){return c}},ft=function(o){yt(c,o);function c(a,e){var t;t=o.call(this,a,e)||this;var n=t.handleExited.bind(qt(t));return t.state={contextValue:{isMounting:!0},handleExited:n,firstRender:!0},t}var u=c.prototype;return u.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},u.componentWillUnmount=function(){this.mounted=!1},c.getDerivedStateFromProps=function(e,t){var n=t.children,l=t.handleExited,h=t.firstRender;return{children:h?Xt(e,l):Zt(e,n,l),firstRender:!1}},u.handleExited=function(e,t){var n=lt(this.props.children);e.key in n||(e.props.onExited&&e.props.onExited(t),this.mounted&&this.setState(function(l){var h=ot({},l.children);return delete h[e.key],{children:h}}))},u.render=function(){var e=this.props,t=e.component,n=e.childFactory,l=Tt(e,["component","childFactory"]),h=this.state.contextValue,v=Qt(this.state.children).map(n);return delete l.appear,delete l.enter,delete l.exit,t===null?j.createElement(nt.Provider,{value:h},v):j.createElement(nt.Provider,{value:h},j.createElement(t,l,v))},c}(j.Component);ft.propTypes={};ft.defaultProps=Kt;const gt=_.lazy(()=>new Promise(o=>setTimeout(()=>o(Mt(()=>import("./AddTask-Bqnh3unI.js"),__vite__mapDeps([3,1,2,4,5,6]))),1e3))),te=()=>{const o=X(n=>n.openModal),c=X(n=>n.setHeaderTitle),u=X(n=>n.tasks),[a,e]=_.useState(u);_.useEffect(()=>{c("Задачи")},[]),_.useEffect(()=>{e(u.map(n=>({...n,isNew:!a.filter(l=>l.id===n.id).length})))},[u]);const t=async()=>{await gt,o({title:"Добавить задачу",body:$.jsx(gt,{}),width:"400px"})};return $.jsxs($.Fragment,{children:[$.jsx(ft,{component:"ul",className:xt.Tasks,children:a.map(({id:n,name:l,desc:h,done:v,start:M,end:D,isNew:F})=>{const k=_.createRef(),C=_.createRef();return $.jsx(N,{timeout:300,nodeRef:k,onExit:()=>{var A;return(A=C==null?void 0:C.current)==null?void 0:A.close()},children:$.jsx("li",{ref:k,children:$.jsx(At,{ref:C,smoothAppear:F,children:$.jsx(Ft,{id:n,name:l,desc:h,done:v,start:M,end:D})})})},n)})}),!u.length&&$.jsx(Ct,{children:"Задач не найдено"}),$.jsx(at,{className:xt.addTaskButton,onClick:t,children:"Добавить задачу"})]})},re=Object.freeze(Object.defineProperty({__proto__:null,default:te},Symbol.toStringTag,{value:"Module"}));export{re as T,mt as d,jt as r};
