import{u as t,r as k,j as s,m as d,f as r,B as i}from"./index-BKDHCSi8.js";import{T as v}from"./arrow_round-D-V5ecJG.js";import{A as O}from"./AreaInput-B5enlyyM.js";import{D as m,i as g,a as A}from"./isSameOrAfter-CCJI6wsI.js";import{u as B}from"./Input.module-CKV_7ayk.js";r.extend(g);r.extend(A);const E=({id:o})=>{const c=t(e=>e.isModalOpen),n=t(e=>e.closeModal),u=t(e=>e.modifyTask),{name:f,desc:x,start:p,end:j}=k.useMemo(()=>t.getState().getTask(o),[]),{control:a,formState:{isValid:h},handleSubmit:b,watch:l,setValue:S}=B({mode:"onChange",defaultValues:{name:f,desc:x,start:p,end:j}}),y=e=>{u(o,e),n()},M=l("start"),T=l("end");return s.jsx(s.Fragment,{children:s.jsxs("form",{onSubmit:b(y),children:[s.jsxs("div",{className:d.scroller,children:[s.jsx(v,{name:"name",label:"Название",rules:{required:"обязательное"},autoFocus:c,control:a}),s.jsx(O,{name:"desc",label:"Описание",control:a}),s.jsx(m,{name:"start",label:"Начало",rules:{validate:e=>(r(T).isBefore(e)&&S("end",e),!0)},control:a}),s.jsx(m,{name:"end",label:"Конец",rules:{validate:e=>r(e).isSameOrAfter(M)||"не может быть раньше начала"},control:a})]}),s.jsxs("div",{className:d.actions,children:[s.jsx(i,{visualDisabled:!h,type:"submit",children:"Сохранить"}),s.jsx(i,{onClick:n,secondary:!0,children:"Отмена"})]})]})})};export{E as default};
