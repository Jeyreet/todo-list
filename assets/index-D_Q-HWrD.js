import{L as o,r as l,j as e,T as j,G as g,I as _,M as k,B as E,u as q}from"./index-DFkOPNkR.js";import{C as V}from"./Collapser-DYStdQkE.js";import{a as y,b as C,M as G,P as $,A as D,u as W,H as A}from"./trashcan-B98EuQF8.js";import{S as R}from"./Switch-D4fd3UeO.js";import{A as F}from"./AreaInput-IXDNddI2.js";import{R as S}from"./Radio-DGiHWsyJ.js";const X={},H=(t,s,r)=>(clearTimeout(t),setTimeout(s,r)),z="_inner_1ualu_1",U="_storeButton_1ualu_5",J="_importIcon_1ualu_9",K="_exportIcon_1ualu_13",O="_gap_1ualu_17",c={inner:z,storeButton:U,importIcon:J,exportIcon:K,gap:O},Q=()=>{const t=y(),{control:s,getValues:r,setValue:i,watch:n}=C({defaultValues:{settingsImportProtection:o.getSettingsImportProtection()}}),a=n("settingsImportProtection");l.useEffect(()=>{a?o.enableSettingsImportProtection():o.disableSettingsImportProtection()},[a]);const u=()=>o.import(r("store")),b=()=>{const d=o.export();i("store",d),navigator.clipboard.writeText(d)};return e.jsxs(e.Fragment,{children:[e.jsx(j,{indent:!0,children:"Хранилище"}),e.jsx(F,{label:"Импорт и экспорт",placeholder:"Ваши данные...",name:"store",control:s}),e.jsx(R,{label:"Предотвратить импортирование настроек",name:"settingsImportProtection",control:s}),e.jsxs(g,{className:c.gap,children:[e.jsx(_,{className:c.storeButton,cs:{icon:c.importIcon},icon:k,label:"Импорт",onClick:u}),e.jsx(_,{className:c.storeButton,cs:{icon:c.exportIcon},icon:k,label:"Экспорт",onClick:b}),e.jsx(_,{className:c.storeButton,cs:{inner:c.inner},icon:G,label:"Сброс",onClick:t.open})]}),e.jsx($,{controls:t,maxWidth:450,children:e.jsxs(g,{column:!0,children:[e.jsx(j,{children:"Сброс"}),e.jsx("p",{children:"Вы уверены, что хотите полностью очистить хранилище? Это действие невозможно отменить!"}),e.jsxs(D,{children:[e.jsx(E,{cs:{inner:c.inner},onClick:()=>{o.reset(),t.close()},children:"Подтвердить"}),e.jsx(E,{onClick:t.close,children:"Отменить сброс"})]})]})})]})},Y=()=>{const t=o.enableTaskRemoveConfirmation,s=o.disableTaskRemoveConfirmation,{control:r,watch:i}=C({mode:"onChange",defaultValues:{tasksRemoveConfirmation:o.getTaskRemoveConfirmation()}}),n=i("tasksRemoveConfirmation");return l.useEffect(()=>{n?t():s()},[s,t,n]),e.jsxs(e.Fragment,{children:[e.jsx(j,{children:"Задачи"}),e.jsx(R,{name:"tasksRemoveConfirmation",label:"Подтверждение удаления задачи",control:r})]})},Z="_input_qw02o_1",ee="_line_qw02o_12",te="_linePadding_qw02o_19",oe="_selectorPosition_qw02o_25",se="_selectorWrapper_qw02o_35",ne="_selector_qw02o_25",m={input:Z,line:ee,linePadding:te,selectorPosition:oe,selectorWrapper:se,selector:ne},B=t=>t<0?0:t>100?100:t,re=({label:t,name:s,placeholder:r,rules:i,control:n,autoFocus:a})=>{const{field:{onChange:u,onBlur:b,value:d,ref:M},fieldState:{error:w}}=W({name:s,rules:i,control:n}),P=l.useRef(null),N=p=>{const h=p.target,x=Number(h.value.replace(/\D/,""));u(B(x))},T=p=>{p.preventDefault();const h=p.type==="touchstart",x=P.current.getBoundingClientRect(),f=I=>{const L=((h?I.touches[0].clientX:I.clientX)-x.left)/x.width*100;u(B(Math.round(L)))};f(p);const v=()=>{h?(document.removeEventListener("touchmove",f),document.removeEventListener("touchend",v)):(document.removeEventListener("mousemove",f),document.removeEventListener("mouseup",v))};h?(document.addEventListener("touchmove",f),document.addEventListener("touchend",v)):(document.addEventListener("mousemove",f),document.addEventListener("mouseup",v))};return e.jsxs("label",{children:[e.jsx(A,{label:t,error:w}),e.jsxs(g,{children:[e.jsx("div",{className:m.line,onMouseDown:T,onTouchStart:T,children:e.jsx("div",{className:m.linePadding,ref:P,children:e.jsx("div",{className:m.selectorPosition,style:{left:`${d}%`},children:e.jsx("div",{className:m.selectorWrapper,children:e.jsx("div",{className:m.selector})})})})}),e.jsx("input",{className:m.input,onChange:N,onBlur:b,value:d??"",ref:M,placeholder:r,type:"text",autoFocus:a})]})]})},ae="_gap_1oqve_1",le={gap:ae},ie=()=>{const{control:t,watch:s}=C({mode:"onChange",defaultValues:{themeMainColor:o.getThemeMainColor(),borderRadius:o.getBorderRadius(),theme:o.getTheme(),gap:o.getGap()}}),r=s("themeMainColor"),i=s("borderRadius"),n=s("theme"),a=s("gap");let u=l.useRef(null);return l.useEffect(()=>{u.current=H(u.current,()=>o.setThemeMainColor(r),200)},[r]),l.useEffect(()=>{i?o.enableBorderRadius():o.disableBorderRadius()},[i]),l.useEffect(()=>{n==="system"?o.clearTheme():n==="light"?o.setLightTheme():n==="dark"&&o.setDarkTheme()},[n]),l.useEffect(()=>{a==="small"?o.setSmallGap():a==="big"?o.setBigGap():a==="standard"&&o.setStandardGap()},[a]),e.jsxs(e.Fragment,{children:[e.jsx(j,{indent:!0,children:"Визуальное оформление"}),e.jsx(re,{name:"themeMainColor",label:"Основной цвет",control:t}),e.jsx(R,{name:"borderRadius",label:"Скругления углов",control:t}),e.jsxs(g,{className:le.gap,children:[e.jsx(S,{name:"theme",label:"Тема",options:[{value:"light",label:"Светлая"},{value:"dark",label:"Темная"},{value:"system",label:"Как в системе"}],control:t}),e.jsx(S,{name:"gap",label:"Отступы",options:[{value:"small",label:"Маленькие"},{value:"standard",label:"Стандартные"},{value:"big",label:"Большие"}],control:t})]})]})},ge=()=>{const t=q(s=>s.setCurrentPageTitle);return l.useLayoutEffect(()=>t("Настройки")),e.jsx(V,{children:e.jsxs(g,{column:!0,className:X.Settings,children:[e.jsx(Y,{}),e.jsx(ie,{}),e.jsx(Q,{})]})})};export{ge as Settings};
